<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Stylesheet documentation for: marcRecord</title>
      <link rel="stylesheet" href="docHtml.css" type="text/css" /><script type="text/javascript"><!--
        
        
        
        var usedByBoxes= new Array('uB_T_marcRecordS_NAL-MARC21slim_MODS3-4.xsl');

        var docBoxes= new Array('dS_T_marcRecordS_NAL-MARC21slim_MODS3-4.xsl');

        var sourceBoxes= new Array('src_T_marcRecordS_NAL-MARC21slim_MODS3-4.xsl');

        
        
        var referencesBoxes= new Array('refs_T_marcRecordS_NAL-MARC21slim_MODS3-4.xsl');

        
        
        
        
        var button_prefix = 'bt_';
        
        /**
        * Get all DIV elements with a specified class name.
        *
        * @param className The class name. 
        */
        function getElementsByClassName(className) {
            var results = [];
    
             if (document.getElementsByClassName == undefined) {
                var allElements = document.getElementsByTagName("div");
                var element;
                for (var i = 0; i < allElements.length; i++) {
                    var element = allElements[i];
                	var elementClass = element.className;
                	if (elementClass == className) { 
                		results.push(element);
                	}
                }
             } else {
                results = document.getElementsByClassName(className);
             }
    
            return results;
        }
            
        /**
        * Returns an element in the current HTML document.
        *
        * @param elementID Identifier of HTML element
        * @return               HTML element object
        */
        function getElementObject(elementID) {
            var elemObj = null;
            if (document.getElementById) {
                elemObj = document.getElementById(elementID);
            }
            return elemObj;
        }
        
        /**
        * Switches the state of a collapseable box, e.g.
        * if it's opened, it'll be closed, and vice versa.
        *
        * @param boxID Identifier of box
        */
        function switchState(boxID) {
            var boxObj = getElementObject(boxID);
            var buttonObj = getElementObject(button_prefix + boxID);
            if (boxObj == null || buttonObj == null) {
                // Box or button not found
            } else if (boxObj.style.display == "none") {
                // Box is closed, so open it
                openBox(boxObj, buttonObj);
            } else if (boxObj.style.display == "block") {
                // Box is opened, so close it
                closeBox(boxObj, buttonObj);
            }
        }
        
        /**
        * Opens a collapseable box.
        *
        * @param boxObj       Collapseable box
        * @param buttonObj Button controlling box
        */
        function openBox(boxObj, buttonObj) {
            if (boxObj == null || buttonObj == null) {
                // Box or button not found
            } else {
                // Change 'display' CSS property of box
                boxObj.style.display = "block";
                
                // Change text of button
                if (boxObj.style.display == "block") {
                    buttonObj.src = "img/btM.gif";
                }
            }
        }
        
        /**
        * Closes a collapseable box.
        *
        * @param boxObj       Collapseable box
        * @param buttonObj Button controlling box
        */
        function closeBox(boxObj, buttonObj) {
            if (boxObj == null || buttonObj == null) {
                // Box or button not found
            } else {
                // Change 'display' CSS property of box
                boxObj.style.display = "none";
                
                // Change text of button
                if (boxObj.style.display == "none") {
                    buttonObj.src = "img/btP.gif";
                }
            }
        }

       /**
        * Switch between the compact list representation and the clasic list representation.
        */
       function switchMode(checkBox) {
            if (checkBox == null) {
                // Checkbox not found
            } else if (checkBox.checked == 1) {
                // Compact mode
                var divs = getElementsByClassName('refItemBlock');
                for (var i = 0; i < divs.length; i ++) {
                    divs[i].style.display = "inline";
                    var children = divs[i].children;
                    var refItemSep = children[children.length - 1];
                    if (refItemSep.className == "refItemSep") {
                        children[children.length - 1].style.display = "inline";
                    }
                }
            } else {
                // Expanded mode
                var divs = getElementsByClassName('refItemBlock');
                for (var i = 0; i < divs.length; i ++) {
                    divs[i].style.display = "block";
                    var children = divs[i].children;
                    var refItemSep = children[children.length - 1];
                    if (refItemSep.className == "refItemSep") {
                        children[children.length - 1].style.display = "none";
                    }
                }
            }
        }

       function switchStateForAll(buttonObj, boxList) {
            if (buttonObj == null) {
                // button not found
            } else if (buttonObj.value == "+") {
                // Expand all
                expandAll(boxList);
                buttonObj.value = "-";
            } else if (buttonObj.value == "-") {
                // Collapse all
                collapseAll(boxList);
                buttonObj.value = "+";
            }
        }
        
        /**
        * Closes all boxes in a given list.
        *
        * @param boxList Array of box IDs
        */
        function collapseAll(boxList) {
            var idx;
            for (idx = 0; idx < boxList.length; idx++) {
                var boxObj = getElementObject(boxList[idx]);
                var buttonObj = getElementObject(button_prefix + boxList[idx]);
                closeBox(boxObj, buttonObj);
            }
        }
            
        /**
        * Open all boxes in a given list.
        *
        * @param boxList Array of box IDs
        */
        function expandAll(boxList) {
            var idx;
            for (idx = 0; idx < boxList.length; idx++) {
                var boxObj = getElementObject(boxList[idx]);
                var buttonObj = getElementObject(button_prefix + boxList[idx]);
                openBox(boxObj, buttonObj);
            }
        }
        
        /**
         * Update the message presented in the title of the html page.
         * - If the documentation was splited by namespace we present something like: "Documentation for namespace 'ns'"
         * - If the documentation was splited by location we present somehing like: "Documentation for 'Schema.xsd'"
         * - If no split we always present: "Documentation for 'MainSchema.xsd'"
         */
        function updPT(message) {
            top.document.title = "Stylesheet documentation for: " + message;
        }
        
          
                    
         /**
          * Finds an HTML element by its ID and makes it floatable over the normal content.
          *
          * @param x_displacement The difference in pixels to the right side of the window from 
          *           the left side of the element.
          * @param y_displacement The difference in pixels to the right side of the window from 
          *           the top of the element.          
          */
         function findAndFloat(id, x_displacement, y_displacement){

            var element = getElementObject(id);            
            
            window[id + "_obj"] = element;
            
            if(document.layers) {
               element.style = element;
            }
            
            element.current_y = y_displacement;      
            element.first_time = true;
         
            element.floatElement = function(){
               // It may be closed by an user action.
                
               // Target X and Y coordinates.
               var x, y;
               
               var myWidth = 0, myHeight = 0;
               if( typeof( window.innerWidth ) == 'number' ) {
                  //Non-IE
                  myWidth = window.innerWidth;
                  myHeight = window.innerHeight;
               } else if( document.documentElement && ( document.documentElement.clientWidth || document.documentElement.clientHeight ) ) {
                  //IE 6+ in 'standards compliant mode'
                  myWidth = document.documentElement.clientWidth;
                  myHeight = document.documentElement.clientHeight;
               } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
                  //IE 4 compatible
                  myWidth = document.body.clientWidth;
                  myHeight = document.body.clientHeight;
               }
               
               
               x = myWidth - x_displacement;
               
               var ns = (navigator.appName.indexOf("Netscape") != -1);               
               y = ns ? pageYOffset : document.documentElement && document.documentElement.scrollTop ? 
                  document.documentElement.scrollTop : document.body.scrollTop;               
               y = y + y_displacement;               
               
               // The current y is the current coordinate of the floating element.
               // This should be at the limit the y target coordinate.
               this.current_y += (y - this.current_y)/1.25;
               
               // Add the pixels constant after the values
               // and move the element.
               var px = document.layers ? "" : "px";
               this.style.left =  x + px;
               this.style.top =  this.current_y + px;
                              
               setTimeout(this.id + "_obj.floatElement()", 100);
            }
            
            element.floatElement();
            return element;
          }

         /**
          * Finds an HTML element by its ID and makes it floatable over the normal content.
          *
          * @param x_displacement The difference in pixels to the right side of the window from 
          *           the left side of the element.
          * @param y_displacement The difference in pixels to the right side of the window from 
          *           the top of the element.          
          */
         function selectTOCGroupBy(id){
         var selectIds = new Array('toc_group_by_location', 'toc_group_by_component_type', 'toc_group_by_namespace', 'toc_group_by_mode');
            // Make all the tabs invisible.
            for (i = 0; i < 4; i++){
               var tab = getElementObject(selectIds[i]);
               tab.style.display = 'none';
            }
            var selTab = getElementObject(id);
            selTab.style.display = 'block';            
         }
          

    
                    //--></script></head>
   <body><a id="T_marcRecordS_NAL-MARC21slim_MODS3-4.xsl"></a><div class="cmpT">Template
         <span class="titleTemplateName">marcRecord</span></div>
      <table class="rt">
         <tr>
            <td class="rt_cTL"></td>
            <td class="rt_lT"></td>
            <td class="rt_cTR"></td>
         </tr>
         <tr>
            <td class="rt_lL"></td>
            <td class="rt_cnt">
               <table class="component">
                  <tbody>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Documentation</div>
                           <div class="flR"><input id="bt_dS_T_marcRecordS_NAL-MARC21slim_MODS3-4.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('dS_T_marcRecordS_NAL-MARC21slim_MODS3-4.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="dS_T_marcRecordS_NAL-MARC21slim_MODS3-4.xsl" style="display:block">
                              <div id="marcRecord">
                                 <h3>Description</h3>marcRecord</div>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Namespace</td>
                        <td>No namespace</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Used by</div>
                           <div class="flR"><input id="bt_uB_T_marcRecordS_NAL-MARC21slim_MODS3-4.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('uB_T_marcRecordS_NAL-MARC21slim_MODS3-4.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="uB_T_marcRecordS_NAL-MARC21slim_MODS3-4.xsl" style="display:block">
                              <table class="uBT">
                                 <tr>
                                    <td class="fCol">Template</td>
                                    <td>
                                       <div class="listGrouping">
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-462.html#M_S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('/')"><span class="mRf">/</span></a></div>
                                       </div>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">References</div>
                           <div class="flR"><input id="bt_refs_T_marcRecordS_NAL-MARC21slim_MODS3-4.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('refs_T_marcRecordS_NAL-MARC21slim_MODS3-4.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="refs_T_marcRecordS_NAL-MARC21slim_MODS3-4.xsl" style="display:block">
                              <table class="uBT">
                                 <tr>
                                    <td class="fCol">Templates</td>
                                    <td>
                                       <div class="listGrouping">
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-449.html#T_chopBracketsS_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('chopBrackets')"><span class="nRf">chopBrackets</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-436.html#T_chopPunctuationS_NAL-MARC21slimUtils.xsl" target="_self" title="No namespace" onclick="updPT('chopPunctuation')"><span class="nRf">chopPunctuation</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-456.html#T_chopPunctuationFrontS_NAL-MARC21slimUtils.xsl" target="_self" title="No namespace" onclick="updPT('chopPunctuationFront')"><span class="nRf">chopPunctuationFront</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-4112.html#T_constituentOrRelatedTypeS_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('constituentOrRelatedType')"><span class="nRf">constituentOrRelatedType</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-415.html#T_createAbstractFrom520S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createAbstractFrom520')"><span class="nRf">createAbstractFrom520</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-433.html#T_createAccessConditionFrom506S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createAccessConditionFrom506')"><span class="nRf">createAccessConditionFrom506</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-434.html#T_createAccessConditionFrom540S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createAccessConditionFrom540')"><span class="nRf">createAccessConditionFrom540</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-4107.html#T_createClassificationFrom050S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createClassificationFrom050')"><span class="nRf">createClassificationFrom050</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-425.html#T_createClassificationFrom060S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createClassificationFrom060')"><span class="nRf">createClassificationFrom060</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-426.html#T_createClassificationFrom080S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createClassificationFrom080')"><span class="nRf">createClassificationFrom080</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-427.html#T_createClassificationFrom082S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createClassificationFrom082')"><span class="nRf">createClassificationFrom082</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-428.html#T_createClassificationFrom084S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createClassificationFrom084')"><span class="nRf">createClassificationFrom084</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-4108.html#T_createClassificationFrom086S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createClassificationFrom086')"><span class="nRf">createClassificationFrom086</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-411.html#T_createGenreFrom047S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createGenreFrom047')"><span class="nRf">createGenreFrom047</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-412.html#T_createGenreFrom336S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createGenreFrom336')"><span class="nRf">createGenreFrom336</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-413.html#T_createGenreFrom655S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createGenreFrom655')"><span class="nRf">createGenreFrom655</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-430.html#T_createLocationFrom852S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createLocationFrom852')"><span class="nRf">createLocationFrom852</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-431.html#T_createLocationFrom856S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createLocationFrom856')"><span class="nRf">createLocationFrom856</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-464.html#T_createNameFrom100S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNameFrom100')"><span class="nRf">createNameFrom100</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-465.html#T_createNameFrom110S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNameFrom110')"><span class="nRf">createNameFrom110</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-466.html#T_createNameFrom111S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNameFrom111')"><span class="nRf">createNameFrom111</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-467.html#T_createNameFrom700S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNameFrom700')"><span class="nRf">createNameFrom700</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-468.html#T_createNameFrom710S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNameFrom710')"><span class="nRf">createNameFrom710</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-469.html#T_createNameFrom711S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNameFrom711')"><span class="nRf">createNameFrom711</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-470.html#T_createNameFrom720S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNameFrom720')"><span class="nRf">createNameFrom720</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-417.html#T_createNoteFrom245cS_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom245c')"><span class="nRf">createNoteFrom245c</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-479.html#T_createNoteFrom362S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom362')"><span class="nRf">createNoteFrom362</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-480.html#T_createNoteFrom500S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom500')"><span class="nRf">createNoteFrom500</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-481.html#T_createNoteFrom502S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom502')"><span class="nRf">createNoteFrom502</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-482.html#T_createNoteFrom504S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom504')"><span class="nRf">createNoteFrom504</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-483.html#T_createNoteFrom508S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom508')"><span class="nRf">createNoteFrom508</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-484.html#T_createNoteFrom511S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom511')"><span class="nRf">createNoteFrom511</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-485.html#T_createNoteFrom515S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom515')"><span class="nRf">createNoteFrom515</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-486.html#T_createNoteFrom518S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom518')"><span class="nRf">createNoteFrom518</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-487.html#T_createNoteFrom524S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom524')"><span class="nRf">createNoteFrom524</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-488.html#T_createNoteFrom530S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom530')"><span class="nRf">createNoteFrom530</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-489.html#T_createNoteFrom533S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom533')"><span class="nRf">createNoteFrom533</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-490.html#T_createNoteFrom535S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom535')"><span class="nRf">createNoteFrom535</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-491.html#T_createNoteFrom536S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom536')"><span class="nRf">createNoteFrom536</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-492.html#T_createNoteFrom538S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom538')"><span class="nRf">createNoteFrom538</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-493.html#T_createNoteFrom541S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom541')"><span class="nRf">createNoteFrom541</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-494.html#T_createNoteFrom545S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom545')"><span class="nRf">createNoteFrom545</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-495.html#T_createNoteFrom546S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom546')"><span class="nRf">createNoteFrom546</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-496.html#T_createNoteFrom561S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom561')"><span class="nRf">createNoteFrom561</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-497.html#T_createNoteFrom562S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom562')"><span class="nRf">createNoteFrom562</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-498.html#T_createNoteFrom581S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom581')"><span class="nRf">createNoteFrom581</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-499.html#T_createNoteFrom583S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom583')"><span class="nRf">createNoteFrom583</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-4100.html#T_createNoteFrom585S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom585')"><span class="nRf">createNoteFrom585</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-4101.html#T_createNoteFrom5XXS_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom5XX')"><span class="nRf">createNoteFrom5XX</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-4118.html#T_createNoteFrom910S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom910')"><span class="nRf">createNoteFrom910</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-4119.html#T_createNoteFrom930S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom930')"><span class="nRf">createNoteFrom930</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-4120.html#T_createNoteFrom945S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom945')"><span class="nRf">createNoteFrom945</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-4121.html#T_createNoteFrom946S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom946')"><span class="nRf">createNoteFrom946</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-4122.html#T_createNoteFrom974S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createNoteFrom974')"><span class="nRf">createNoteFrom974</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-429.html#T_createRelatedItemFrom490S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createRelatedItemFrom490')"><span class="nRf">createRelatedItemFrom490</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-423.html#T_createSubChronFrom648S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createSubChronFrom648')"><span class="nRf">createSubChronFrom648</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-4105.html#T_createSubFrom653S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createSubFrom653')"><span class="nRf">createSubFrom653</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-454.html#T_createSubFrom656S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createSubFrom656')"><span class="nRf">createSubFrom656</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-418.html#T_createSubGeoFrom034S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createSubGeoFrom034')"><span class="nRf">createSubGeoFrom034</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-4102.html#T_createSubGeoFrom043S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createSubGeoFrom043')"><span class="nRf">createSubGeoFrom043</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-4104.html#T_createSubGeoFrom255S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createSubGeoFrom255')"><span class="nRf">createSubGeoFrom255</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-453.html#T_createSubGeoFrom651S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createSubGeoFrom651')"><span class="nRf">createSubGeoFrom651</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-455.html#T_createSubGeoFrom662752S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createSubGeoFrom662752')"><span class="nRf">createSubGeoFrom662752</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-419.html#T_createSubNameFrom600S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createSubNameFrom600')"><span class="nRf">createSubNameFrom600</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-420.html#T_createSubNameFrom610S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createSubNameFrom610')"><span class="nRf">createSubNameFrom610</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-421.html#T_createSubNameFrom611S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createSubNameFrom611')"><span class="nRf">createSubNameFrom611</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-4103.html#T_createSubTemFrom045S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createSubTemFrom045')"><span class="nRf">createSubTemFrom045</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-422.html#T_createSubTitleFrom630S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createSubTitleFrom630')"><span class="nRf">createSubTitleFrom630</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-424.html#T_createSubTopFrom650S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createSubTopFrom650')"><span class="nRf">createSubTopFrom650</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-414.html#T_createTOCFrom505S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createTOCFrom505')"><span class="nRf">createTOCFrom505</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-416.html#T_createTargetAudienceFrom521S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createTargetAudienceFrom521')"><span class="nRf">createTargetAudienceFrom521</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-450.html#T_createTitleInfoFrom130S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createTitleInfoFrom130')"><span class="nRf">createTitleInfoFrom130</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-47.html#T_createTitleInfoFrom210S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createTitleInfoFrom210')"><span class="nRf">createTitleInfoFrom210</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-452.html#T_createTitleInfoFrom240S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createTitleInfoFrom240')"><span class="nRf">createTitleInfoFrom240</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-48.html#T_createTitleInfoFrom245S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createTitleInfoFrom245')"><span class="nRf">createTitleInfoFrom245</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-49.html#T_createTitleInfoFrom246S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createTitleInfoFrom246')"><span class="nRf">createTitleInfoFrom246</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-451.html#T_createTitleInfoFrom730S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createTitleInfoFrom730')"><span class="nRf">createTitleInfoFrom730</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-410.html#T_createTitleInfoFrom740S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('createTitleInfoFrom740')"><span class="nRf">createTitleInfoFrom740</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-478.html#T_isoLanguageS_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('isoLanguage')"><span class="nRf">isoLanguage</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-446.html#T_nameDateS_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('nameDate')"><span class="nRf">nameDate</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-438.html#T_partS_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('part')"><span class="nRf">part</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-4115.html#T_relatedFormS_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('relatedForm')"><span class="nRf">relatedForm</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-4110.html#T_relatedIdentifierISSNS_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('relatedIdentifierISSN')"><span class="nRf">relatedIdentifierISSN</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-4117.html#T_relatedItem76X-78XS_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('relatedItem76X-78X')"><span class="nRf">relatedItem76X-78X</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-4109.html#T_relatedNameS_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('relatedName')"><span class="nRf">relatedName</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-4111.html#T_relatedNoteS_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('relatedNote')"><span class="nRf">relatedNote</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-4116.html#T_relatedPartNumNameS_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('relatedPartNumName')"><span class="nRf">relatedPartNumName</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-444.html#T_relatedTitleS_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('relatedTitle')"><span class="nRf">relatedTitle</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-477.html#T_rfcLanguagesS_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('rfcLanguages')"><span class="nRf">rfcLanguages</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-4114.html#T_roleS_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('role')"><span class="nRf">role</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-471.html#T_scriptCodeS_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('scriptCode')"><span class="nRf">scriptCode</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-4113.html#T_specialSubfieldSelectS_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('specialSubfieldSelect')"><span class="nRf">specialSubfieldSelect</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-42.html#T_subfieldSelectS_NAL-MARC21slimUtils.xsl" target="_self" title="No namespace" onclick="updPT('subfieldSelect')"><span class="nRf">subfieldSelect</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-448.html#T_subtitleS_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('subtitle')"><span class="nRf">subtitle</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-46.html#T_termsOfAddressS_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('termsOfAddress')"><span class="nRf">termsOfAddress</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-474.html#T_xxx880S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('xxx880')"><span class="nRf">xxx880</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-472.html#T_z2xx880S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('z2xx880')"><span class="nRf">z2xx880</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-475.html#T_z3xx880S_NAL-MARC21slim_MODS3-4.xsl" target="_self" title="No namespace" onclick="updPT('z3xx880')"><span class="nRf">z3xx880</span></a></div>
                                       </div>
                                    </td>
                                 </tr>
                                 <tr>
                                    <td class="fCol">Functions</td>
                                    <td>
                                       <div class="listGrouping">
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-473.html#F_convertMARCCountryS_NAL-MARC21slimUtils.xsl" target="_self" title="http://functions" onclick="updPT('convertMARCCountry(marccode)')"><span>convertMARCCountry (</span><span class="fParams">marccode</span><span>)</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-476.html#F_isoTwo2LangS_NAL-MARC21slimUtils.xsl" target="_self" title="http://functions" onclick="updPT('isoTwo2Lang(iso_639-2)')"><span>isoTwo2Lang (</span><span class="fParams">iso_639-2</span><span>)</span></a><span class="refItemSep">;</span></div>
                                          <div class="refItemBlock"><a href="NAL-MARC21slim_MODS3-4106.html#F_subjCatCodeS_NAL-MARC21slimUtils.xsl" target="_self" title="http://functions" onclick="updPT('subjCatCode(code)')"><span>subjCatCode (</span><span class="fParams">code</span><span>)</span></a></div>
                                       </div>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                     <tr>
                        <td class="fCol">Import precedence</td>
                        <td>0</td>
                     </tr>
                     <tr>
                        <td class="fCol">
                           <div class="flL">Source</div>
                           <div class="flR"><input id="bt_src_T_marcRecordS_NAL-MARC21slim_MODS3-4.xsl" type="image" src="img/btM.gif" value="-" onclick="switchState('src_T_marcRecordS_NAL-MARC21slim_MODS3-4.xsl');" class="control" /></div>
                        </td>
                        <td>
                           <div id="src_T_marcRecordS_NAL-MARC21slim_MODS3-4.xsl" style="display:block">
                              <table class="pWCont">
                                 <tr>
                                    <td width="100%">
                                       <pre><span class="tXSLEl">&lt;xsl:template</span><span class="tAN"> name=</span><span class="tAV">"marcRecord"</span><span class="tXSLEl">&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"marcLeader"</span><span class="tAN"> select=</span><span class="tAV">"leader"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"marcLeader6"</span><span class="tAN"> select=</span><span class="tAV">"substring($marcLeader, 7, 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"marcLeader7"</span><span class="tAN"> select=</span><span class="tAV">"substring($marcLeader, 8, 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"marcLeader19"</span><span class="tAN"> select=</span><span class="tAV">"substring($marcLeader, 20, 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"controlField008"</span><span class="tAN"> select=</span><span class="tAV">"controlfield[@tag = '008']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"typeOf008"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader6 = 'a'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader7 = 'a' or $marcLeader7 = 'c' or $marcLeader7 = 'd' or $marcLeader7 = 'm'"</span><span class="tXSLEl">&gt;</span><span class="tT" style="white-space:normal">BK</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader7 = 'b' or $marcLeader7 = 'i' or $marcLeader7 = 's'"</span><span class="tXSLEl">&gt;</span><span class="tT" style="white-space:normal">SE</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader6 = 't'"</span><span class="tXSLEl">&gt;</span><span class="tT" style="white-space:normal">BK</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader6 = 'p'"</span><span class="tXSLEl">&gt;</span><span class="tT" style="white-space:normal">MM</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader6 = 'm'"</span><span class="tXSLEl">&gt;</span><span class="tT" style="white-space:normal">CF</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader6 = 'e' or $marcLeader6 = 'f'"</span><span class="tXSLEl">&gt;</span><span class="tT" style="white-space:normal">MP</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader6 = 'g' or $marcLeader6 = 'k' or $marcLeader6 = 'o' or $marcLeader6 = 'r'"</span><span class="tXSLEl">&gt;</span><span class="tT" style="white-space:normal">VM</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader6 = 'c' or $marcLeader6 = 'd' or $marcLeader6 = 'i' or $marcLeader6 = 'j'"</span><span class="tXSLEl">&gt;</span><span class="tT" style="white-space:normal">MU</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- titleInfo --&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '245']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createTitleInfoFrom245"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '210']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createTitleInfoFrom210"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '246']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createTitleInfoFrom246"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '240']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createTitleInfoFrom240"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '740']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createTitleInfoFrom740"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '130']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createTitleInfoFrom130"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '730']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createTitleInfoFrom730"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '242']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;titleInfo</span><span class="tAN"> type=</span><span class="tAV">"translated"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tC">&lt;!--09/01/04 Added subfield $y--&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'y']"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"lang"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"text()"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
      </span><span class="tC">&lt;!-- AQ1.27 tmee/dlf --&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"title"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"subfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tC">&lt;!-- 1/04 removed $h, b --&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"codes"</span><span class="tXSLEl">&gt;</span><span class="tT">a</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"titleChop"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$title"</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"@ind2 &gt; 0"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tEl">&lt;nonSort</span><span class="tEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"substring($titleChop, 1, @ind2)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tEl">&lt;/nonSort&gt;</span><span class="tI">
          </span><span class="tEl">&lt;title</span><span class="tEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"substring($titleChop, @ind2 + 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tEl">&lt;/title&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tEl">&lt;title</span><span class="tEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$titleChop"</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tEl">&lt;/title&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
      </span><span class="tC">&lt;!-- 1/04 fix --&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"subtitle"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"part"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/titleInfo&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- name --&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '100']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNameFrom100"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '110']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNameFrom110"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '111']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNameFrom111"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '700']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNameFrom700"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '710']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNameFrom710"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '711']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNameFrom711"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '720']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNameFrom720"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tC">&lt;!--old 7XXs
		&lt;xsl:for-each select="datafield[@tag='700'][not(subfield[@code='t'])]"&gt;
			&lt;name type="personal"&gt;
				&lt;xsl:call-template name="nameABCDQ"/&gt;
				&lt;xsl:call-template name="affiliation"/&gt;
				&lt;xsl:call-template name="role"/&gt;
			&lt;/name&gt;
		&lt;/xsl:for-each&gt;
		&lt;xsl:for-each select="datafield[@tag='710'][not(subfield[@code='t'])]"&gt;
			&lt;name type="corporate"&gt;
				&lt;xsl:call-template name="nameABCDN"/&gt;
				&lt;xsl:call-template name="role"/&gt;
			&lt;/name&gt;
		&lt;/xsl:for-each&gt;
		&lt;xsl:for-each select="datafield[@tag='711'][not(subfield[@code='t'])]"&gt;
			&lt;name type="conference"&gt;
				&lt;xsl:call-template name="nameACDEQ"/&gt;
				&lt;xsl:call-template name="role"/&gt;
			&lt;/name&gt;
		&lt;/xsl:for-each&gt;

		&lt;xsl:for-each select="datafield[@tag='720'][not(subfield[@code='t'])]"&gt;
		&lt;name&gt;
		&lt;xsl:if test="@ind1='1'"&gt;
		&lt;xsl:attribute name="type"&gt;
		&lt;xsl:text&gt;personal&lt;/xsl:text&gt;
		&lt;/xsl:attribute&gt;
		&lt;/xsl:if&gt;
		&lt;namePart&gt;
		&lt;xsl:value-of select="subfield[@code='a']"/&gt;
		&lt;/namePart&gt;
		&lt;xsl:call-template name="role"/&gt;
		&lt;/name&gt;
		&lt;/xsl:for-each&gt;
--&gt;</span><span class="tI">
  </span><span class="tEl">&lt;typeOfResource</span><span class="tEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader7 = 'c'"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"collection"</span><span class="tXSLEl">&gt;</span><span class="tT">yes</span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader6 = 'd' or $marcLeader6 = 'f' or $marcLeader6 = 'p' or $marcLeader6 = 't'"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"manuscript"</span><span class="tXSLEl">&gt;</span><span class="tT">yes</span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader6 = 'a' or $marcLeader6 = 't'"</span><span class="tXSLEl">&gt;</span><span class="tT">text</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader6 = 'e' or $marcLeader6 = 'f'"</span><span class="tXSLEl">&gt;</span><span class="tT">cartographic</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader6 = 'c' or $marcLeader6 = 'd'"</span><span class="tXSLEl">&gt;</span><span class="tT">notated music</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader6 = 'i'"</span><span class="tXSLEl">&gt;</span><span class="tT">sound recording-nonmusical</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader6 = 'j'"</span><span class="tXSLEl">&gt;</span><span class="tT">sound recording-musical</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader6 = 'k'"</span><span class="tXSLEl">&gt;</span><span class="tT">still image</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader6 = 'g'"</span><span class="tXSLEl">&gt;</span><span class="tT">moving image</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader6 = 'r'"</span><span class="tXSLEl">&gt;</span><span class="tT">three dimensional object</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader6 = 'm'"</span><span class="tXSLEl">&gt;</span><span class="tT">software, multimedia</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader6 = 'p'"</span><span class="tXSLEl">&gt;</span><span class="tT">mixed material</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
  </span><span class="tEl">&lt;/typeOfResource&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"substring($controlField008, 26, 1) = 'd'"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">globe</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = '007'][substring(text(), 1, 1) = 'a'][substring(text(), 2, 1) = 'r']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">remote-sensing image</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$typeOf008 = 'MP'"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"controlField008-25"</span><span class="tAN"> select=</span><span class="tAV">"substring($controlField008, 26, 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-25 = 'a' or $controlField008-25 = 'b' or $controlField008-25 = 'c' or controlfield[@tag = 007][substring(text(), 1, 1) = 'a'][substring(text(), 2, 1) = 'j']"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">map</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-25 = 'e' or controlfield[@tag = 007][substring(text(), 1, 1) = 'a'][substring(text(), 2, 1) = 'd']"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">atlas</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$typeOf008 = 'SE'"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"controlField008-21"</span><span class="tAN"> select=</span><span class="tAV">"substring($controlField008, 22, 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-21 = 'd'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">database</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-21 = 'l'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">loose-leaf</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-21 = 'm'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">series</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-21 = 'n'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">newspaper</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-21 = 'p'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">periodical</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-21 = 'w'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">web site</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$typeOf008 = 'BK' or $typeOf008 = 'SE'"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"controlField008-24"</span><span class="tAN"> select=</span><span class="tAV">"substring($controlField008, 25, 4)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-24, 'a')"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">abstract or summary</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-24, 'b')"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">bibliography</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-24, 'c')"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">catalog</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-24, 'd')"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">dictionary</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-24, 'e')"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">encyclopedia</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-24, 'f')"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">handbook</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-24, 'g')"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">legal article</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-24, 'i')"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">index</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-24, 'k')"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">discography</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-24, 'l')"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">legislation</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-24, 'm')"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">theses</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-24, 'n')"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">survey of literature</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-24, 'o')"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">review</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-24, 'p')"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">programmed text</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-24, 'q')"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">filmography</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-24, 'r')"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">directory</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-24, 's')"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">statistics</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-24, 't')"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">technical report</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-24, 'v')"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">legal case and case notes</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-24, 'w')"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">law report or digest</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-24, 'z')"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">treaty</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"controlField008-29"</span><span class="tAN"> select=</span><span class="tAV">"substring($controlField008, 30, 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-29 = '1'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">conference publication</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$typeOf008 = 'CF'"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"controlField008-26"</span><span class="tAN"> select=</span><span class="tAV">"substring($controlField008, 27, 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-26 = 'a'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">numeric data</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-26 = 'e'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">database</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-26 = 'f'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">font</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-26 = 'g'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">game</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$typeOf008 = 'BK'"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"substring($controlField008, 25, 1) = 'j'"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">patent</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"substring($controlField008, 25, 1) = '2'"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">offprint</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"substring($controlField008, 31, 1) = '1'"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">festschrift</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"controlField008-34"</span><span class="tAN"> select=</span><span class="tAV">"substring($controlField008, 35, 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-34 = 'a' or $controlField008-34 = 'b' or $controlField008-34 = 'c' or $controlField008-34 = 'd'"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">biography</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"controlField008-33"</span><span class="tAN"> select=</span><span class="tAV">"substring($controlField008, 34, 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 'e'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">essay</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 'd'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">drama</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 'c'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">comic strip</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 'l'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">fiction</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 'h'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">humor, satire</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 'i'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">letter</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 'f'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">novel</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 'j'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">short story</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 's'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">speech</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$typeOf008 = 'MU'"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"controlField008-30-31"</span><span class="tAN"> select=</span><span class="tAV">"substring($controlField008, 31, 2)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-30-31, 'b')"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">biography</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-30-31, 'c')"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">conference publication</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-30-31, 'd')"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">drama</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-30-31, 'e')"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">essay</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-30-31, 'f')"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">fiction</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-30-31, 'o')"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">folktale</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-30-31, 'h')"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">history</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-30-31, 'k')"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">humor, satire</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-30-31, 'm')"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">memoir</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-30-31, 'p')"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">poetry</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-30-31, 'r')"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">rehearsal</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-30-31, 'g')"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">reporting</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-30-31, 's')"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">sound</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-30-31, 'l')"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">speech</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$typeOf008 = 'VM'"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"controlField008-33"</span><span class="tAN"> select=</span><span class="tAV">"substring($controlField008, 34, 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 'a'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">art original</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 'b'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">kit</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 'c'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">art reproduction</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 'd'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">diorama</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 'f'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">filmstrip</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 'g'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">legal article</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 'i'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">picture</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 'k'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">graphic</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 'l'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">technical drawing</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 'm'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">motion picture</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 'n'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">chart</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 'o'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">flash card</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 'p'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">microscope slide</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 'q' or controlfield[@tag = 007][substring(text(), 1, 1) = 'a'][substring(text(), 2, 1) = 'q']"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">model</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 'r'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">realia</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 's'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">slide</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 't'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">transparency</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 'v'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">videorecording</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-33 = 'w'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;genre</span><span class="tAN"> authority=</span><span class="tAV">"marcgt"</span><span class="tEl">&gt;</span><span class="tT">toy</span><span class="tEl">&lt;/genre&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- genre --&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 047]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createGenreFrom047"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 336]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createGenreFrom336"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 655]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createGenreFrom655"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- originInfo 250 and 260 
			MODS elements place and PlaceTerm: Guidelines for Use: 
	
  	  	If both a code and a term are given that represent the same
	    	place, use one &lt;place&gt; and multiple occurrences of &lt;placeTerm&gt;. 
			For different places, use different occurrences of &lt;place&gt;.
	     --&gt;</span><span class="tI">
  </span><span class="tEl">&lt;originInfo</span><span class="tEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"scriptCode"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[(@tag = 260 or @tag = 250) and subfield[@code = 'a' or code = 'b' or @code = 'c' or code = 'g']]"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"z2xx880"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"marcCountryCode"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:analyze-string</span><span class="tAN"> select=</span><span class="tAV">"self::node()"</span><span class="tAN"> regex=</span><span class="tAV">"(/d{{4,8}}[a-z]/d{{4,8}})([a-z])"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:matching-substring</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"normalize-space(regex-group(2))"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:matching-substring&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:non-matching-substring</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"marcPublicationCode"</span><span class="tAN"> select=</span><span class="tAV">"normalize-space(translate(replace($controlField008,'(\d+[a-z]\d+)(\D{2,3})','$2'),'0123456789|',' '))"</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"matches($marcPublicationCode, '\D{3,4}')"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tEl">&lt;place</span><span class="tEl">&gt;</span><span class="tI">
              </span><span class="tC">&lt;!-- marccountry code --&gt;</span><span class="tI">
              </span><span class="tEl">&lt;placeTerm</span><span class="tEl">&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"type"</span><span class="tXSLEl">&gt;</span><span class="tT">code1</span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"authority"</span><span class="tXSLEl">&gt;</span><span class="tT">marccountry</span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$marcPublicationCode"</span><span class="tXSLEl">/&gt;</span><span class="tI">
              </span><span class="tEl">&lt;/placeTerm&gt;</span><span class="tI">
              </span><span class="tC">&lt;!-- decodes MARC Country Codes --&gt;</span><span class="tI">
              </span><span class="tEl">&lt;placeTerm</span><span class="tEl">&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"type"</span><span class="tXSLEl">&gt;</span><span class="tT">text1</span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"f:convertMARCCountry($marcPublicationCode)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
              </span><span class="tEl">&lt;/placeTerm&gt;</span><span class="tI">
            </span><span class="tEl">&lt;/place&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:non-matching-substring&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:fallback</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"MARCpublicationCode"</span><span class="tAN"> select=</span><span class="tAV">"normalize-space(substring($controlField008,16,3))"</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"translate($MARCpublicationCode,'|','')"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tEl">&lt;place</span><span class="tEl">&gt;</span><span class="tI">
              </span><span class="tEl">&lt;placeTerm</span><span class="tEl">&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"type"</span><span class="tXSLEl">&gt;</span><span class="tT">code2</span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"authority"</span><span class="tXSLEl">&gt;</span><span class="tT">marccountry</span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$MARCpublicationCode"</span><span class="tXSLEl">/&gt;</span><span class="tI">
              </span><span class="tEl">&lt;/placeTerm&gt;</span><span class="tI">
            </span><span class="tEl">&lt;/place&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:fallback&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:analyze-string&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"controlField008-07-16_analyzed"</span><span class="tAN"> select=</span><span class="tAV">"normalize-space(translate(replace($controlField008, 's\d+[a-z]\d{0,8}(\D{3,4})(.*[a-z]\D+)[a-z]{3}\D+', '$2'), '0123456789|# ', ''))"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"controlField008-07-16_analyzed"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:analyze-string</span><span class="tAN"> select=</span><span class="tAV">"$controlField008-07-16_analyzed"</span><span class="tAN"> regex=</span><span class="tAV">"([a-z]{{2}})|([a-z]{{2,3}})|([a-z]{{4,}})"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:matching-substring</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"regex-group(1) eq 'xx'"</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"string-length(regex-group(2)) &lt;= 3 and string-length(regex-group(2)) &gt;= 2"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"normalize-space(regex-group(2))"</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"regex-group(3)"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"normalize-space(regex-group(3))"</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:matching-substring&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:non-matching-substring</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"MARCpublicationCode"</span><span class="tAN"> select=</span><span class="tAV">"normalize-space(substring($controlField008, 16, 3))"</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"translate($MARCpublicationCode, '|', '')"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tEl">&lt;place</span><span class="tEl">&gt;</span><span class="tI">
              </span><span class="tEl">&lt;placeTerm</span><span class="tEl">&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"type"</span><span class="tXSLEl">&gt;</span><span class="tT">code</span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"authority"</span><span class="tXSLEl">&gt;</span><span class="tT">marccountry</span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$MARCpublicationCode"</span><span class="tXSLEl">/&gt;</span><span class="tI">
              </span><span class="tEl">&lt;/placeTerm&gt;</span><span class="tI">
            </span><span class="tEl">&lt;/place&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:non-matching-substring&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:analyze-string&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"translate($controlField008-07-16_analyzed, '|', '')"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains($controlField008-07-16_analyzed, 'xx')"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"matches($controlField008-07-16_analyzed, '[a-z]{3}')"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tEl">&lt;place</span><span class="tEl">&gt;</span><span class="tI">
            </span><span class="tC">&lt;!-- marccountry code --&gt;</span><span class="tI">
            </span><span class="tEl">&lt;placeTerm</span><span class="tEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"type"</span><span class="tXSLEl">&gt;</span><span class="tT">code</span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"authority"</span><span class="tXSLEl">&gt;</span><span class="tT">marccountry</span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$controlField008-07-16_analyzed"</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tEl">&lt;/placeTerm&gt;</span><span class="tI">
            </span><span class="tC">&lt;!-- decodes MARC Country Codes --&gt;</span><span class="tI">
            </span><span class="tEl">&lt;placeTerm</span><span class="tEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"type"</span><span class="tXSLEl">&gt;</span><span class="tT">text</span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"f:convertMARCCountry($controlField008-07-16_analyzed)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tEl">&lt;/placeTerm&gt;</span><span class="tI">
          </span><span class="tEl">&lt;/place&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tC">&lt;!--  &lt;xsl:variable name="marcCountryCode"&gt;
	            &lt;xsl:analyze-string select="self::node()" regex="(/d{{4,8}}[a-z]/d{{4,8}})([a-z])"&gt;
	                &lt;xsl:matching-substring&gt;
	                    &lt;xsl:value-of select="normalize-space(regex-group(2))"/&gt;
	                &lt;/xsl:matching-substring&gt;
	                &lt;xsl:non-matching-substring&gt;
	                    &lt;xsl:variable name="marcPublicationCode" select="normalize-space(translate(replace($controlField008,'(\d+[a-z]\d+)(\D{2,3})','$2'),'0123456789|',' '))"/&gt;
	                    &lt;xsl:if test="matches($marcPublicationCode, '\D{3,4}')"&gt;
	                        &lt;place&gt;
	                            &lt;!-\- marccountry code -\-&gt;
	                            &lt;placeTerm&gt;
	                                &lt;xsl:attribute name="type"&gt;code1&lt;/xsl:attribute&gt;
	                                &lt;xsl:attribute name="authority"&gt;marccountry&lt;/xsl:attribute&gt;
	                                &lt;xsl:value-of select="$marcPublicationCode"/&gt;
	                            &lt;/placeTerm&gt;
	                            &lt;!-\- decodes MARC Country Codes -\-&gt;
	                            &lt;placeTerm&gt;
	                                &lt;xsl:attribute name="type"&gt;text1&lt;/xsl:attribute&gt;
	                                &lt;xsl:value-of select="f:convertMARCCountry($marcPublicationCode)"/&gt;
	                            &lt;/placeTerm&gt;
	                        &lt;/place&gt;
	                    &lt;/xsl:if&gt;	                    
	                &lt;/xsl:non-matching-substring&gt;
	                &lt;xsl:fallback&gt;
	                    &lt;xsl:variable name="MARCpublicationCode"
	                        select="normalize-space(substring($controlField008,16,3))"/&gt;
	                    &lt;xsl:if test="translate($MARCpublicationCode,'|','')"&gt;
	                        &lt;place&gt;
	                            &lt;placeTerm&gt;
	                                &lt;xsl:attribute name="type"&gt;code2&lt;/xsl:attribute&gt;
	                                &lt;xsl:attribute name="authority"&gt;marccountry&lt;/xsl:attribute&gt;
	                                &lt;xsl:value-of select="$MARCpublicationCode"/&gt;
	                            &lt;/placeTerm&gt;
	                        &lt;/place&gt;
	                    &lt;/xsl:if&gt;
	                &lt;/xsl:fallback&gt;
	            &lt;/xsl:analyze-string&gt;
	        &lt;/xsl:variable&gt;
	        
	       &lt;xsl:if test="translate($MARCpublicationCode, '|', '')"&gt;
	        &lt;xsl:if test="matches($marcCountryCode, '[a-z]{2,3}')"&gt;
	            &lt;place&gt;
	                &lt;!-/- marccountry code -/-&gt;
	                &lt;placeTerm&gt;
	                    &lt;xsl:attribute name="type"&gt;code0&lt;/xsl:attribute&gt;
	                    &lt;xsl:attribute name="authority"&gt;marccountry&lt;/xsl:attribute&gt;
	                    &lt;xsl:value-of select="$marcCountryCode"/&gt;
	                &lt;/placeTerm&gt;
	                &lt;!-/- decodes MARC Country Codes -/-&gt;
	                &lt;placeTerm&gt;
	                    &lt;xsl:attribute name="type"&gt;text0&lt;/xsl:attribute&gt;
	                    &lt;xsl:value-of select="f:convertMARCCountry($marcCountryCode)"/&gt;
	                &lt;/placeTerm&gt;
	            &lt;/place&gt;
	        &lt;/xsl:if&gt;--&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 044]/subfield[@code = 'c']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;place</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;placeTerm</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"type"</span><span class="tXSLEl">&gt;</span><span class="tT">code</span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"authority"</span><span class="tXSLEl">&gt;</span><span class="tT">iso3166</span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/placeTerm&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/place&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 260]/subfield[@code = 'a']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;place</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;placeTerm</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"type"</span><span class="tXSLEl">&gt;</span><span class="tT">text</span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuationFront"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/placeTerm&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/place&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 046]/subfield[@code = 'm']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;dateValid</span><span class="tAN"> point=</span><span class="tAV">"start"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/dateValid&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 046]/subfield[@code = 'n']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;dateValid</span><span class="tAN"> point=</span><span class="tAV">"end"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/dateValid&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 046]/subfield[@code = 'j']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;dateModified</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/dateModified&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tC">&lt;!-- tmee 1.52 --&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 046]/subfield[@code = 'c']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;dateIssued</span><span class="tAN"> encoding=</span><span class="tAV">"marc"</span><span class="tAN"> point=</span><span class="tAV">"start"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/dateIssued&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 046]/subfield[@code = 'e']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;dateIssued</span><span class="tAN"> encoding=</span><span class="tAV">"marc"</span><span class="tAN"> point=</span><span class="tAV">"end"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/dateIssued&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 046]/subfield[@code = 'k']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;dateCreated</span><span class="tAN"> encoding=</span><span class="tAV">"marc"</span><span class="tAN"> point=</span><span class="tAV">"start"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/dateCreated&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 046]/subfield[@code = 'l']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;dateCreated</span><span class="tAN"> encoding=</span><span class="tAV">"marc"</span><span class="tAN"> point=</span><span class="tAV">"end"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/dateCreated&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tC">&lt;!-- tmee 1.35 1.36 dateIssued/nonMSS vs dateCreated/MSS --&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 260]/subfield[@code = 'b' or @code = 'c' or @code = 'g']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"@code = 'b'"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tEl">&lt;publisher</span><span class="tEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"punctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:text</span><span class="tXSLEl">&gt;</span><span class="tT">:,;/ </span><span class="tXSLEl">&lt;/xsl:text&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
          </span><span class="tEl">&lt;/publisher&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"(@code = 'c')"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader6 = 'd' or $marcLeader6 = 'f' or $marcLeader6 = 'p' or $marcLeader6 = 't'"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tEl">&lt;dateCreated</span><span class="tEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
            </span><span class="tEl">&lt;/dateCreated&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"not($marcLeader6 = 'd' or $marcLeader6 = 'f' or $marcLeader6 = 'p' or $marcLeader6 = 't')"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tEl">&lt;dateIssued</span><span class="tEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
            </span><span class="tEl">&lt;/dateIssued&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"@code = 'g'"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader6 = 'd' or $marcLeader6 = 'f' or $marcLeader6 = 'p' or $marcLeader6 = 't'"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tEl">&lt;dateCreated</span><span class="tEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tEl">&lt;/dateCreated&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"not($marcLeader6 = 'd' or $marcLeader6 = 'f' or $marcLeader6 = 'p' or $marcLeader6 = 't')"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tEl">&lt;dateCreated</span><span class="tEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tEl">&lt;/dateCreated&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"dataField260c"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 260]/subfield[@code = 'c']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"controlField008-7-10"</span><span class="tAN"> select=</span><span class="tAV">"normalize-space(substring($controlField008, 8, 4))"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"controlField008-11-14"</span><span class="tAN"> select=</span><span class="tAV">"normalize-space(substring($controlField008, 12, 4))"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tC">&lt;!-- 2014-08-17 JG --&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"controlField008-11-12"</span><span class="tAN"> select=</span><span class="tAV">"normalize-space(substring($controlField008, 12, 6))"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"controlField008-6"</span><span class="tAN"> select=</span><span class="tAV">"normalize-space(substring($controlField008, 7, 1))"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tC">&lt;!-- 2022-12-05 CM3 --&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"controlfield008-7-12"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:analyze-string</span><span class="tAN"> select=</span><span class="tAV">"replace($controlField008, '(\d+[a-z])(\d+.*)', '$2')"</span><span class="tAN"> regex=</span><span class="tAV">"(\d+)(.*)"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:matching-substring</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"regex-group(1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:matching-substring&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:non-matching-substring</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$controlField008-7-10"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:non-matching-substring&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:analyze-string&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
    </span><span class="tC">&lt;!-- tmee 1.35 and 1.36 and 1.84--&gt;</span><span class="tI">
    </span><span class="tC">&lt;!--
	Example: &lt;controlfield tag="008"&gt;221003s2022 flu 001 0 eng &lt;/controlfield&gt; 
	Fixed field 008: Character Positions	
			All materials
			00-05 - Date entered on file
			06 - Type of date/Publication status
			07-10 - Date 1
			11-14 - Date 2
			15-17 - Place of publication, production, or execution
			18-34 - [See one of the seven separate 008/18-34 configuration sections for these elements.]
			35-37 - Language
			38 - Modified record
			39 - Cataloging source
		
    Question: Where was this item published?
    Answer: Reading lines 15-17 you can determine it was in "flu" which decode is Florida. 
    --&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"($controlField008-6 = 'e' or $controlField008-6 = 'p' or $controlField008-6 = 'r' or $controlField008-6 = 's' or $controlField008-6 = 't') and ($marcLeader6 = 'd' or $marcLeader6 = 'f' or $marcLeader6 = 'p' or $marcLeader6 = 't')"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-7-10 and ($controlField008-7-10 != $dataField260c)"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;dateCreated</span><span class="tAN"> encoding=</span><span class="tAV">"marc"</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$controlField008-7-10"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/dateCreated&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tC">&lt;!-- 2014-08-17 JG --&gt;</span><span class="tI">
    </span><span class="tC">&lt;!-- 2022-11-23 CM3, added NALControlField008 variable --&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tC">&lt;!--YYYYMMDD --&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"($controlField008-6 = 'e' or $controlField008-6 = 'p' or $controlField008-6 = 'r' or $controlField008-6 = 's' or $controlField008-6 = 't') and not($marcLeader6 = 'd' or $marcLeader6 = 'f' or $marcLeader6 = 'p' or $marcLeader6 = 't')"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tC">&lt;!-- use substring to limit for dates--&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"NALcontrolField008"</span><span class="tAN"> select=</span><span class="tAV">"substring(controlfield[@tag = '008'], 1, 15)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"matches($NALcontrolField008, '(\d+)(\w)(.*)')"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:analyze-string</span><span class="tAN"> select=</span><span class="tAV">"substring($NALcontrolField008, 1, 15)"</span><span class="tAN"> regex=</span><span class="tAV">"(\d+)(\w)(\d+)"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:matching-substring</span><span class="tXSLEl">&gt;</span><span class="tI">
                </span><span class="tEl">&lt;dateIssued</span><span class="tAN"> encoding=</span><span class="tAV">"w3cdtf"</span><span class="tAN"> keyDate=</span><span class="tAV">"yes"</span><span class="tEl">&gt;</span><span class="tI">
                  </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
                    </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"matches(regex-group(3), '\d{8}')"</span><span class="tXSLEl">&gt;</span><span class="tI">
                      </span><span class="tC">&lt;!--YYYY--&gt;</span><span class="tI">
                      </span><span class="tXSLEl">&lt;xsl:number</span><span class="tAN"> value=</span><span class="tAV">"substring(regex-group(3), 1, 4)"</span><span class="tAN"> format=</span><span class="tAV">"0001"</span><span class="tXSLEl">/&gt;</span><span class="tI">
                      </span><span class="tXSLEl">&lt;xsl:text</span><span class="tXSLEl">&gt;</span><span class="tT">-</span><span class="tXSLEl">&lt;/xsl:text&gt;</span><span class="tI">
                      </span><span class="tC">&lt;!--MM--&gt;</span><span class="tI">
                      </span><span class="tXSLEl">&lt;xsl:number</span><span class="tAN"> value=</span><span class="tAV">"substring(regex-group(3), 5, 2)"</span><span class="tAN"> format=</span><span class="tAV">"01"</span><span class="tXSLEl">/&gt;</span><span class="tI">
                      </span><span class="tXSLEl">&lt;xsl:text</span><span class="tXSLEl">&gt;</span><span class="tT">-</span><span class="tXSLEl">&lt;/xsl:text&gt;</span><span class="tI">
                      </span><span class="tC">&lt;!--DD--&gt;</span><span class="tI">
                      </span><span class="tXSLEl">&lt;xsl:number</span><span class="tAN"> value=</span><span class="tAV">"substring(regex-group(3), 7, 2)"</span><span class="tAN"> format=</span><span class="tAV">"01"</span><span class="tXSLEl">/&gt;</span><span class="tI">
                    </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
                    </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"matches(regex-group(3), '\d{6}')"</span><span class="tXSLEl">&gt;</span><span class="tI">
                      </span><span class="tC">&lt;!--YYYY--&gt;</span><span class="tI">
                      </span><span class="tXSLEl">&lt;xsl:number</span><span class="tAN"> value=</span><span class="tAV">"substring(regex-group(3), 1, 4)"</span><span class="tAN"> format=</span><span class="tAV">"0001"</span><span class="tXSLEl">/&gt;</span><span class="tI">
                      </span><span class="tXSLEl">&lt;xsl:text</span><span class="tXSLEl">&gt;</span><span class="tT">-</span><span class="tXSLEl">&lt;/xsl:text&gt;</span><span class="tI">
                      </span><span class="tC">&lt;!--MM--&gt;</span><span class="tI">
                      </span><span class="tXSLEl">&lt;xsl:number</span><span class="tAN"> value=</span><span class="tAV">"substring(regex-group(3), 5, 2)"</span><span class="tAN"> format=</span><span class="tAV">"01"</span><span class="tXSLEl">/&gt;</span><span class="tI">
                    </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
                    </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tI">
                      </span><span class="tC">&lt;!--YYYY--&gt;</span><span class="tI">
                      </span><span class="tXSLEl">&lt;xsl:number</span><span class="tAN"> value=</span><span class="tAV">"substring(regex-group(3), 1, 4)"</span><span class="tAN"> format=</span><span class="tAV">"0001"</span><span class="tXSLEl">/&gt;</span><span class="tI">
                    </span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
                  </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
                </span><span class="tEl">&lt;/dateIssued&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;/xsl:matching-substring&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:analyze-string&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains(., $controlfield008-7-12)"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tEl">&lt;dateIssued</span><span class="tAN"> encoding=</span><span class="tAV">"marc"</span><span class="tEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$controlfield008-7-12"</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tEl">&lt;/dateIssued&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"contains(., $controlField008-11-14)"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tEl">&lt;dateIssued</span><span class="tAN"> encoding=</span><span class="tAV">"marc"</span><span class="tEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"concat($controlField008-7-10, $controlField008-11-14)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tEl">&lt;/dateIssued&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-6 = 'c' or $controlField008-6 = 'd' or $controlField008-6 = 'i' or $controlField008-6 = 'k' or $controlField008-6 = 'm' or $controlField008-6 = 'u'"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-7-10"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;dateIssued</span><span class="tAN"> encoding=</span><span class="tAV">"marc"</span><span class="tAN"> point=</span><span class="tAV">"start"</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$controlField008-7-10"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/dateIssued&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-6 = 'c' or $controlField008-6 = 'd' or $controlField008-6 = 'i' or $controlField008-6 = 'k' or $controlField008-6 = 'm' or $controlField008-6 = 'u'"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-11-14"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;dateIssued</span><span class="tAN"> encoding=</span><span class="tAV">"marc"</span><span class="tAN"> point=</span><span class="tAV">"end"</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$controlField008-11-14"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/dateIssued&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-6 = 'q'"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-7-10"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;dateIssued</span><span class="tAN"> encoding=</span><span class="tAV">"marc"</span><span class="tAN"> point=</span><span class="tAV">"start"</span><span class="tAN"> qualifier=</span><span class="tAV">"questionable"</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$controlField008-7-10"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/dateIssued&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-6 = 'q'"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-11-14"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;dateIssued</span><span class="tAN"> encoding=</span><span class="tAV">"marc"</span><span class="tAN"> point=</span><span class="tAV">"end"</span><span class="tAN"> qualifier=</span><span class="tAV">"questionable"</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$controlField008-11-14"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/dateIssued&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tC">&lt;!-- tmee 1.77 008-06 dateIssued for value 's' 1.89 removed 20130920
			&lt;xsl:if test="$controlField008-6='s'"&gt;
				&lt;xsl:if test="$controlField008-7-10"&gt;
					&lt;dateIssued encoding="marc"&gt;
						&lt;xsl:value-of select="$controlField008-7-10"/&gt;
					&lt;/dateIssued&gt;
				&lt;/xsl:if&gt;
			&lt;/xsl:if&gt;
			--&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-6 = 't'"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-11-14"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;copyrightDate</span><span class="tAN"> encoding=</span><span class="tAV">"marc"</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$controlField008-11-14"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/copyrightDate&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 033][@ind1 = '0' or @ind1 = '1']/subfield[@code = 'a']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;dateCaptured</span><span class="tAN"> encoding=</span><span class="tAV">"iso8601"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/dateCaptured&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 033][@ind1 = '2']/subfield[@code = 'a'][1]"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;dateCaptured</span><span class="tAN"> encoding=</span><span class="tAV">"iso8601"</span><span class="tAN"> point=</span><span class="tAV">"start"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/dateCaptured&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 033][@ind1 = '2']/subfield[@code = 'a'][2]"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;dateCaptured</span><span class="tAN"> encoding=</span><span class="tAV">"iso8601"</span><span class="tAN"> point=</span><span class="tAV">"end"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/dateCaptured&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 250]/subfield[@code = 'a']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;edition</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/edition&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tC">&lt;!-- 2.12 cm3 --&gt;</span><span class="tI">
    </span><span class="tC">&lt;!-- 1.94 --&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader7 = 'a' or $marcLeader7 = 'c' or $marcLeader7 = 'd' or $marcLeader7 = 'm' or $marcLeader7 = 'm' and ($marcLeader19 = 'a' or $marcLeader19 = 'b' or $marcLeader19 = 'c') or $marcLeader7 = 'm' and ($marcLeader19 = '#')"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"leader"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;issuance</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tC">&lt;!-- 2.08 cm3 --&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader7 = 'a' or $marcLeader7 = 'c' or $marcLeader7 = 'd' or $marcLeader7 = 'm'"</span><span class="tXSLEl">&gt;</span><span class="tT">monographic</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
            </span><span class="tC">&lt;!-- &lt;xsl:when test="$marcLeader7 = 'b'"&gt;continuing&lt;/xsl:when&gt; --&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader7 = 'm' and ($marcLeader19 = 'a' or $marcLeader19 = 'b' or $marcLeader19 = 'c')"</span><span class="tXSLEl">&gt;</span><span class="tT">multipart monograph</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader7 = 'm' and ($marcLeader19 = '#')"</span><span class="tXSLEl">&gt;</span><span class="tT">single
                                unit</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
            </span><span class="tC">&lt;!-- &lt;xsl:when test="$marcLeader7 = 'i'"&gt;integrating resource&lt;/xsl:when&gt;
                        &lt;xsl:when test="$marcLeader7 = 'b' or $marcLeader7 = 's'"&gt;serial&lt;/xsl:when&gt;--&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/issuance&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 310] | datafield[@tag = 321]"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;frequency</span><span class="tAN"> authority=</span><span class="tAV">"marcfrequency"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"subfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"codes"</span><span class="tXSLEl">&gt;</span><span class="tT">ab</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/frequency&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tC">&lt;!--	1.67 1.72 updated fixed location issue 201308 1.86	--&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$typeOf008 = 'SE'"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"controlfield[@tag = 008]"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"controlField008-18"</span><span class="tAN"> select=</span><span class="tAV">"substring($controlField008, 19, 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"frequency"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tEl">&lt;frequency</span><span class="tEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-18 = 'a'"</span><span class="tXSLEl">&gt;</span><span class="tT">Annual</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-18 = 'b'"</span><span class="tXSLEl">&gt;</span><span class="tT">Bimonthly</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-18 = 'c'"</span><span class="tXSLEl">&gt;</span><span class="tT">Semiweekly</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-18 = 'd'"</span><span class="tXSLEl">&gt;</span><span class="tT">Daily</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-18 = 'e'"</span><span class="tXSLEl">&gt;</span><span class="tT">Biweekly</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-18 = 'f'"</span><span class="tXSLEl">&gt;</span><span class="tT">Semiannual</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-18 = 'g'"</span><span class="tXSLEl">&gt;</span><span class="tT">Biennial</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-18 = 'h'"</span><span class="tXSLEl">&gt;</span><span class="tT">Triennial</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-18 = 'i'"</span><span class="tXSLEl">&gt;</span><span class="tT">Three times a
                                    week</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-18 = 'j'"</span><span class="tXSLEl">&gt;</span><span class="tT">Three times a
                                    month</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-18 = 'k'"</span><span class="tXSLEl">&gt;</span><span class="tT">Continuously
                                    updated</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-18 = 'm'"</span><span class="tXSLEl">&gt;</span><span class="tT">Monthly</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-18 = 'q'"</span><span class="tXSLEl">&gt;</span><span class="tT">Quarterly</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-18 = 's'"</span><span class="tXSLEl">&gt;</span><span class="tT">Semimonthly</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-18 = 't'"</span><span class="tXSLEl">&gt;</span><span class="tT">Three times a
                                    year</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-18 = 'u'"</span><span class="tXSLEl">&gt;</span><span class="tT">Unknown</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-18 = 'w'"</span><span class="tXSLEl">&gt;</span><span class="tT">Weekly</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-18 = '#'"</span><span class="tXSLEl">&gt;</span><span class="tT">Completely
                                    irregular</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
          </span><span class="tEl">&lt;/frequency&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$frequency != ''"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tEl">&lt;frequency</span><span class="tEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$frequency"</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tEl">&lt;/frequency&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tEl">&lt;/originInfo&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- originInfo - 264 --&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 264][@ind2 = 0]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tC">&lt;!-- 2.03 added if test to originInfo producer cm3 2022/10 --&gt;</span><span class="tI">
    </span><span class="tEl">&lt;originInfo</span><span class="tAN"> displayLabel=</span><span class="tAV">"producer"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tC">&lt;!-- Template checks for altRepGroup - 880 $6 --&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"xxx880"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"subfield[@code = 'a'] != ''"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;place</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tEl">&lt;placeTerm</span><span class="tEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'a']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tEl">&lt;/placeTerm&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/place&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"subfield[@code = 'b'] != ''"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;publisher</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'b']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/publisher&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"subfield[@code = 'c'] != ''"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;dateOther</span><span class="tAN"> type=</span><span class="tAV">"production"</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'c']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/dateOther&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/originInfo&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 264][@ind2 = 1]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;originInfo</span><span class="tAN"> displayLabel=</span><span class="tAV">"publisher"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tC">&lt;!-- Revision 2.07 used substring-before function to get subfield b (ie., publisher) and subfield c (i.e., dateIssued) 2022/12/08 --&gt;</span><span class="tI">
      </span><span class="tC">&lt;!-- Template checks for altRepGroup - 880 $6 1.88 20130829 added chopPunc--&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"xxx880"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;place</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;placeTerm</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"type"</span><span class="tXSLEl">&gt;</span><span class="tT">text</span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuationFront"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/placeTerm&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/place&gt;</span><span class="tI">
      </span><span class="tEl">&lt;publisher</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"substring-before(subfield[@code = 'b'], ',')"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/publisher&gt;</span><span class="tI">
      </span><span class="tEl">&lt;dateIssued</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"substring-before(subfield[@code = 'c'], '.')"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/dateIssued&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/originInfo&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 264][@ind2 = '2']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;originInfo</span><span class="tAN"> displayLabel=</span><span class="tAV">"distributor"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tC">&lt;!-- Template checks for altRepGroup - 880 $6 --&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"xxx880"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;place</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;placeTerm</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'a']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/placeTerm&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/place&gt;</span><span class="tI">
      </span><span class="tEl">&lt;publisher</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'b']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/publisher&gt;</span><span class="tI">
      </span><span class="tEl">&lt;dateOther</span><span class="tAN"> type=</span><span class="tAV">"distribution"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'c']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/dateOther&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/originInfo&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 264][@ind2 = '3']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;originInfo</span><span class="tAN"> displayLabel=</span><span class="tAV">"manufacturer"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tC">&lt;!-- Template checks for altRepGroup - 880 $6 --&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"xxx880"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;place</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;placeTerm</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'a']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/placeTerm&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/place&gt;</span><span class="tI">
      </span><span class="tEl">&lt;publisher</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'b']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/publisher&gt;</span><span class="tI">
      </span><span class="tEl">&lt;dateOther</span><span class="tAN"> type=</span><span class="tAV">"manufacture"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'c']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/dateOther&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/originInfo&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 880]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"related_datafield"</span><span class="tAN"> select=</span><span class="tAV">"substring-before(subfield[@code = '6'], '-')"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"occurence_number"</span><span class="tAN"> select=</span><span class="tAV">"substring(substring-after(subfield[@code = '6'], '-'), 1, 2)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"hit"</span><span class="tAN"> select=</span><span class="tAV">"../datafield[@tag = $related_datafield and contains(subfield[@code = '6'], concat('880-', $occurence_number))]/@tag"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$hit = '260'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;originInfo</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"scriptCode"</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"../datafield[@tag = 260 and subfield[@code = 'a' or code = 'b' or @code = 'c' or code = 'g']]"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"z2xx880"</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"subfield[@code = 'a']"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tEl">&lt;place</span><span class="tEl">&gt;</span><span class="tI">
              </span><span class="tEl">&lt;placeTerm</span><span class="tAN"> type=</span><span class="tAV">"text"</span><span class="tEl">&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'a']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
              </span><span class="tEl">&lt;/placeTerm&gt;</span><span class="tI">
            </span><span class="tEl">&lt;/place&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"subfield[@code = 'b']"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tEl">&lt;publisher</span><span class="tEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'b']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tEl">&lt;/publisher&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"subfield[@code = 'c']"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tEl">&lt;dateIssued</span><span class="tEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'c']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tEl">&lt;/dateIssued&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"subfield[@code = 'g']"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tEl">&lt;dateCreated</span><span class="tEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'g']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tEl">&lt;/dateCreated&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"../datafield[@tag = 880]/subfield[@code = 6][contains(text(), '250')]"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tEl">&lt;edition</span><span class="tEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"following-sibling::subfield"</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tEl">&lt;/edition&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/originInfo&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$hit = '300'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;physicalDescription</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"../datafield[@tag = 300]"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"z3xx880"</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
          </span><span class="tEl">&lt;extent</span><span class="tEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"subfield"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"@code = 'a' or @code = '3' or @code = 'b' or @code = 'c'"</span><span class="tXSLEl">&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:text</span><span class="tXSLEl">&gt;</span><span class="tT"> </span><span class="tXSLEl">&lt;/xsl:text&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
          </span><span class="tEl">&lt;/extent&gt;</span><span class="tI">
          </span><span class="tC">&lt;!-- form 337 338 --&gt;</span><span class="tI">
          </span><span class="tEl">&lt;form</span><span class="tEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"authority"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = '2']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"xxx880"</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"subfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"codes"</span><span class="tXSLEl">&gt;</span><span class="tT">a</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
          </span><span class="tEl">&lt;/form&gt;</span><span class="tI">
          </span><span class="tEl">&lt;form</span><span class="tEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"authority"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = '2']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"xxx880"</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"subfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"codes"</span><span class="tXSLEl">&gt;</span><span class="tT">ab</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
          </span><span class="tEl">&lt;/form&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/physicalDescription&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- 008 language --&gt;</span><span class="tI">
  </span><span class="tC">&lt;!--Revision 2.05 controlField008-35-37replace, uses replace function and regex to pinpoint 3 letter string--&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"controlField008-36-38"</span><span class="tAN"> select=</span><span class="tAV">"normalize-space(translate(substring($controlField008, 36, 3), '|', ''))"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"controlField008-35-37"</span><span class="tAN"> select=</span><span class="tAV">"normalize-space(translate(substring($controlField008, 35, 3), '|', ''))"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"matches($controlField008-36-38, '[a-z]{3}')"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;language</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;languageTerm</span><span class="tAN"> authority=</span><span class="tAV">"iso639-2b"</span><span class="tAN"> type=</span><span class="tAV">"code"</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$controlField008-36-38"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/languageTerm&gt;</span><span class="tI">
        </span><span class="tEl">&lt;languageTerm</span><span class="tAN"> type=</span><span class="tAV">"text"</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"f:isoTwo2Lang($controlField008-36-38)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/languageTerm&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/language&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"matches($controlField008-35-37, '[a-z]{3}')"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;language</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;languageTerm</span><span class="tAN"> authority=</span><span class="tAV">"iso639-2b"</span><span class="tAN"> type=</span><span class="tAV">"code"</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$controlField008-35-37"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/languageTerm&gt;</span><span class="tI">
        </span><span class="tEl">&lt;languageTerm</span><span class="tAN"> type=</span><span class="tAV">"text"</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"f:isoTwo2Lang($controlField008-35-37)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/languageTerm&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/language&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:analyze-string</span><span class="tAN"> select=</span><span class="tAV">"$controlField008"</span><span class="tAN"> regex=</span><span class="tAV">"(\d+[a-z]\d+)(\D+)([a-z]{{3}})(\|{{2}})"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:matching-substring</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tEl">&lt;language</span><span class="tEl">&gt;</span><span class="tI">
            </span><span class="tEl">&lt;languageTerm</span><span class="tAN"> authority=</span><span class="tAV">"iso639-2b"</span><span class="tAN"> type=</span><span class="tAV">"code"</span><span class="tEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"regex-group(3)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tEl">&lt;/languageTerm&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"matches(regex-group(1), '[a-z]{2,3}')"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tEl">&lt;languageTerm</span><span class="tAN"> type=</span><span class="tAV">"text"</span><span class="tEl">&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"f:isoTwo2Lang(regex-group(1))"</span><span class="tXSLEl">/&gt;</span><span class="tI">
              </span><span class="tEl">&lt;/languageTerm&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
          </span><span class="tEl">&lt;/language&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:matching-substring&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:non-matching-substring</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:non-matching-substring&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:analyze-string&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- language 041 --&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 041]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'a' or @code = 'b' or @code = 'd' or @code = 'e' or @code = 'f' or @code = 'g' or @code = 'h']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"langCodes"</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"../subfield[@code = '2'] = 'rfc3066'"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tC">&lt;!-- not stacked but could be repeated --&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"rfcLanguages"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"nodeNum"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"1"</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"usedLanguages"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:text</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"controlField008-35-37"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$controlField008-35-37"</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tC">&lt;!-- iso --&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"allLanguages"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:copy-of</span><span class="tAN"> select=</span><span class="tAV">"$langCodes"</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"currentLanguage"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"substring($allLanguages, 1, 3)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"isoLanguage"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"currentLanguage"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"substring($allLanguages, 1, 3)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"remainingLanguages"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"substring($allLanguages, 4, string-length($allLanguages) - 3)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"usedLanguages"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-35-37"</span><span class="tXSLEl">&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$controlField008-35-37"</span><span class="tXSLEl">/&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- physicalDescription --&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"physicalDescription"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tC">&lt;!--3.2 change tmee 007/11 --&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$typeOf008 = 'CF' and controlfield[@tag = 007][substring(., 12, 1) = 'a']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;digitalOrigin</span><span class="tEl">&gt;</span><span class="tT">reformatted digital</span><span class="tEl">&lt;/digitalOrigin&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$typeOf008 = 'CF' and controlfield[@tag = 007][substring(., 12, 1) = 'b']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;digitalOrigin</span><span class="tEl">&gt;</span><span class="tT">digitized microfilm</span><span class="tEl">&lt;/digitalOrigin&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$typeOf008 = 'CF' and controlfield[@tag = 007][substring(., 12, 1) = 'd']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;digitalOrigin</span><span class="tEl">&gt;</span><span class="tT">digitized other analog</span><span class="tEl">&lt;/digitalOrigin&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"controlField008-23"</span><span class="tAN"> select=</span><span class="tAV">"substring($controlField008, 24, 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"controlField008-29"</span><span class="tAN"> select=</span><span class="tAV">"substring($controlField008, 30, 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"check008-23"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$typeOf008 = 'BK' or $typeOf008 = 'MU' or $typeOf008 = 'SE' or $typeOf008 = 'MM'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"true()"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"check008-29"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$typeOf008 = 'MP' or $typeOf008 = 'VM'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"true()"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"($check008-23 and $controlField008-23 = 'f') or ($check008-29 and $controlField008-29 = 'f')"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcform"</span><span class="tEl">&gt;</span><span class="tT">braille</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"($controlField008-23 = ' ' and ($marcLeader6 = 'c' or $marcLeader6 = 'd')) or (($typeOf008 = 'BK' or $typeOf008 = 'SE') and ($controlField008-23 = ' ' or $controlField008 = 'r'))"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcform"</span><span class="tEl">&gt;</span><span class="tT">print</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader6 = 'm' or ($check008-23 and $controlField008-23 = 's') or ($check008-29 and $controlField008-29 = 's')"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcform"</span><span class="tEl">&gt;</span><span class="tT">electronic</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tC">&lt;!-- 1.33 --&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$marcLeader6 = 'o'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcform"</span><span class="tEl">&gt;</span><span class="tT">kit</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"($check008-23 and $controlField008-23 = 'b') or ($check008-29 and $controlField008-29 = 'b')"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcform"</span><span class="tEl">&gt;</span><span class="tT">microfiche</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"($check008-23 and $controlField008-23 = 'a') or ($check008-29 and $controlField008-29 = 'a')"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcform"</span><span class="tEl">&gt;</span><span class="tT">microfilm</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
    </span><span class="tC">&lt;!-- 1/04 fix --&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"datafield[@tag = 130]/subfield[@code = 'h']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"gmd"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopBrackets"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 130]/subfield[@code = 'h']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"datafield[@tag = 240]/subfield[@code = 'h']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"gmd"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopBrackets"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 240]/subfield[@code = 'h']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"datafield[@tag = 242]/subfield[@code = 'h']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"gmd"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopBrackets"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 242]/subfield[@code = 'h']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"datafield[@tag = 245]/subfield[@code = 'h']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"gmd"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopBrackets"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 245]/subfield[@code = 'h']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"datafield[@tag = 246]/subfield[@code = 'h']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"gmd"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopBrackets"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 246]/subfield[@code = 'h']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"datafield[@tag = 730]/subfield[@code = 'h']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"gmd"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopBrackets"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 730]/subfield[@code = 'h']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 256]/subfield[@code = 'a']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'c']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"substring(text(), 14, 1) = 'a'"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tEl">&lt;reformattingQuality</span><span class="tEl">&gt;</span><span class="tT">access</span><span class="tEl">&lt;/reformattingQuality&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"substring(text(), 14, 1) = 'p'"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tEl">&lt;reformattingQuality</span><span class="tEl">&gt;</span><span class="tT">preservation</span><span class="tEl">&lt;/reformattingQuality&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"substring(text(), 14, 1) = 'r'"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tEl">&lt;reformattingQuality</span><span class="tEl">&gt;</span><span class="tT">replacement</span><span class="tEl">&lt;/reformattingQuality&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tC">&lt;!--3.2 change tmee 007/01 --&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'c'][substring(text(), 2, 1) = 'b']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">electronic resource</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">chip cartridge</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'c'][substring(text(), 2, 1) = 'c']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">electronic resource</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">computer optical disc cartridge</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'c'][substring(text(), 2, 1) = 'j']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">electronic resource</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">magnetic disc</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'c'][substring(text(), 2, 1) = 'm']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">electronic resource</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">magneto-optical disc</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'c'][substring(text(), 2, 1) = 'o']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">electronic resource</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">optical disc</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tC">&lt;!-- 1.38 AQ 1.29 tmee 	1.66 added marccategory and marcsmd as part of 3.4 --&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'c'][substring(text(), 2, 1) = 'r']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">electronic resource</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">remote</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'c'][substring(text(), 2, 1) = 'a']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">electronic resource</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">tape cartridge</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'c'][substring(text(), 2, 1) = 'f']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">electronic resource</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">tape cassette</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'c'][substring(text(), 2, 1) = 'h']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">electronic resource</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">tape reel</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'd'][substring(text(), 2, 1) = 'a']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">globe</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">celestial globe</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'd'][substring(text(), 2, 1) = 'e']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">globe</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">earth moon globe</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'd'][substring(text(), 2, 1) = 'b']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">globe</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">planetary or lunar globe</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'd'][substring(text(), 2, 1) = 'c']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">globe</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">terrestrial globe</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'o'][substring(text(), 2, 1) = 'o']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">kit</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">kit</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'a'][substring(text(), 2, 1) = 'd']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">map</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">atlas</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'a'][substring(text(), 2, 1) = 'g']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">map</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">diagram</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'a'][substring(text(), 2, 1) = 'j']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">map</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">map</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'a'][substring(text(), 2, 1) = 'q']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">map</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">model</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'a'][substring(text(), 2, 1) = 'k']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">map</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">profile</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'a'][substring(text(), 2, 1) = 'r']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">remote-sensing image</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'a'][substring(text(), 2, 1) = 's']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">map</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">section</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'a'][substring(text(), 2, 1) = 'y']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">map</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">view</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'h'][substring(text(), 2, 1) = 'a']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">microform</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">aperture card</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'h'][substring(text(), 2, 1) = 'e']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">microform</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">microfiche</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'h'][substring(text(), 2, 1) = 'f']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">microform</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">microfiche cassette</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'h'][substring(text(), 2, 1) = 'b']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">microform</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">microfilm cartridge</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'h'][substring(text(), 2, 1) = 'c']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">microform</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">microfilm cassette</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'h'][substring(text(), 2, 1) = 'd']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">microform</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">microfilm reel</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'h'][substring(text(), 2, 1) = 'g']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">microform</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">microopaque</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'm'][substring(text(), 2, 1) = 'c']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">motion picture</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">film cartridge</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'm'][substring(text(), 2, 1) = 'f']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">motion picture</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">film cassette</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'm'][substring(text(), 2, 1) = 'r']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">motion picture</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">film reel</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'k'][substring(text(), 2, 1) = 'n']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">nonprojected graphic</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">chart</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'k'][substring(text(), 2, 1) = 'c']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">nonprojected graphic</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">collage</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'k'][substring(text(), 2, 1) = 'd']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">nonprojected graphic</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">drawing</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'k'][substring(text(), 2, 1) = 'o']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">nonprojected graphic</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">flash card</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'k'][substring(text(), 2, 1) = 'e']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">nonprojected graphic</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">painting</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'k'][substring(text(), 2, 1) = 'f']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">nonprojected graphic</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">photomechanical print</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'k'][substring(text(), 2, 1) = 'g']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">nonprojected graphic</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">photonegative</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'k'][substring(text(), 2, 1) = 'h']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">nonprojected graphic</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">photoprint</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'k'][substring(text(), 2, 1) = 'i']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">nonprojected graphic</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">picture</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'k'][substring(text(), 2, 1) = 'j']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">nonprojected graphic</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">print</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'k'][substring(text(), 2, 1) = 'l']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">nonprojected graphic</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">technical drawing</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'q'][substring(text(), 2, 1) = 'q']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">notated music</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">notated music</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'g'][substring(text(), 2, 1) = 'd']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">projected graphic</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">filmslip</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'g'][substring(text(), 2, 1) = 'c']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">projected graphic</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">filmstrip cartridge</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'g'][substring(text(), 2, 1) = 'o']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">projected graphic</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">filmstrip roll</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'g'][substring(text(), 2, 1) = 'f']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">projected graphic</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">other filmstrip type</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'g'][substring(text(), 2, 1) = 's']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">projected graphic</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">slide</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'g'][substring(text(), 2, 1) = 't']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">projected graphic</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">transparency</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'r'][substring(text(), 2, 1) = 'r']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">remote-sensing image</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">remote-sensing image</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 's'][substring(text(), 2, 1) = 'e']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">sound recording</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">cylinder</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 's'][substring(text(), 2, 1) = 'q']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">sound recording</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">roll</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 's'][substring(text(), 2, 1) = 'g']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">sound recording</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">sound cartridge</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 's'][substring(text(), 2, 1) = 's']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">sound recording</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">sound cassette</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 's'][substring(text(), 2, 1) = 'd']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">sound recording</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">sound disc</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 's'][substring(text(), 2, 1) = 't']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">sound recording</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">sound-tape reel</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 's'][substring(text(), 2, 1) = 'i']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">sound recording</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">sound-track film</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 's'][substring(text(), 2, 1) = 'w']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">sound recording</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">wire recording</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'f'][substring(text(), 2, 1) = 'c']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">tactile material</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">braille</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'f'][substring(text(), 2, 1) = 'b']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">tactile material</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">combination</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'f'][substring(text(), 2, 1) = 'a']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">tactile material</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">moon</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'f'][substring(text(), 2, 1) = 'd']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">tactile material</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">tactile, with no writing system</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 't'][substring(text(), 2, 1) = 'c']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">text</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">braille</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 't'][substring(text(), 2, 1) = 'b']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">text</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">large print</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 't'][substring(text(), 2, 1) = 'a']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">text</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">regular print</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 't'][substring(text(), 2, 1) = 'd']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">text</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">text in looseleaf binder</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'v'][substring(text(), 2, 1) = 'c']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">videorecording</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">videocartridge</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'v'][substring(text(), 2, 1) = 'f']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">videorecording</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">videocassette</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'v'][substring(text(), 2, 1) = 'd']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">videorecording</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">videodisc</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 007][substring(text(), 1, 1) = 'v'][substring(text(), 2, 1) = 'r']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marccategory"</span><span class="tEl">&gt;</span><span class="tT">videorecording</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> authority=</span><span class="tAV">"marcsmd"</span><span class="tEl">&gt;</span><span class="tT">videoreel</span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 856]/subfield[@code = 'q'][string-length(.) &gt; 1]"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;internetMediaType</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/internetMediaType&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 300]"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;extent</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"subfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"codes"</span><span class="tXSLEl">&gt;</span><span class="tT">abce3fg</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/extent&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 337]"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> type=</span><span class="tAV">"media"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"authority"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = '2']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"subfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"codes"</span><span class="tXSLEl">&gt;</span><span class="tT">a</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 338]"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;form</span><span class="tAN"> type=</span><span class="tAV">"carrier"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"authority"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = '2']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"subfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"codes"</span><span class="tXSLEl">&gt;</span><span class="tT">a</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/form&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tC">&lt;!-- 1.43 tmee 351 $3$a$b$c--&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 351]"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;note</span><span class="tAN"> type=</span><span class="tAV">"arrangement"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = '3']"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:text</span><span class="tXSLEl">&gt;</span><span class="tT">: </span><span class="tXSLEl">&lt;/xsl:text&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"subfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"codes"</span><span class="tXSLEl">&gt;</span><span class="tT">abc</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/note&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"string-length(normalize-space($physicalDescription))"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;physicalDescription</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 300]"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tC">&lt;!-- Template checks for altRepGroup - 880 $6 --&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"z3xx880"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 337]"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tC">&lt;!-- Template checks for altRepGroup - 880 $6 --&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"xxx880"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 338]"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tC">&lt;!-- Template checks for altRepGroup - 880 $6 --&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"xxx880"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:copy-of</span><span class="tAN"> select=</span><span class="tAV">"$physicalDescription"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/physicalDescription&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 520]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createAbstractFrom520"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 505]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createTOCFrom505"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 521]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createTargetAudienceFrom521"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 506]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createAccessConditionFrom506"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 540]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createAccessConditionFrom540"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"$typeOf008 = 'BK' or $typeOf008 = 'CF' or $typeOf008 = 'MU' or $typeOf008 = 'VM'"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"controlField008-22"</span><span class="tAN"> select=</span><span class="tAV">"substring($controlField008, 23, 1)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tC">&lt;!-- 01/04 fix --&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-22 = 'd'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;targetAudience</span><span class="tAN"> authority=</span><span class="tAV">"marctarget"</span><span class="tEl">&gt;</span><span class="tT">adolescent</span><span class="tEl">&lt;/targetAudience&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-22 = 'e'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;targetAudience</span><span class="tAN"> authority=</span><span class="tAV">"marctarget"</span><span class="tEl">&gt;</span><span class="tT">adult</span><span class="tEl">&lt;/targetAudience&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-22 = 'g'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;targetAudience</span><span class="tAN"> authority=</span><span class="tAV">"marctarget"</span><span class="tEl">&gt;</span><span class="tT">general</span><span class="tEl">&lt;/targetAudience&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-22 = 'b' or $controlField008-22 = 'c' or $controlField008-22 = 'j'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;targetAudience</span><span class="tAN"> authority=</span><span class="tAV">"marctarget"</span><span class="tEl">&gt;</span><span class="tT">juvenile</span><span class="tEl">&lt;/targetAudience&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-22 = 'a'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;targetAudience</span><span class="tAN"> authority=</span><span class="tAV">"marctarget"</span><span class="tEl">&gt;</span><span class="tT">preschool</span><span class="tEl">&lt;/targetAudience&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"$controlField008-22 = 'f'"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;targetAudience</span><span class="tAN"> authority=</span><span class="tAV">"marctarget"</span><span class="tEl">&gt;</span><span class="tT">specialized</span><span class="tEl">&lt;/targetAudience&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- 1.32 tmee Drop note mapping for 510 and map only to &lt;relatedItem&gt;
		&lt;xsl:for-each select="datafield[@tag=510]"&gt;
			&lt;note type="citation/reference"&gt;
				&lt;xsl:call-template name="uri"/&gt;
				&lt;xsl:variable name="str"&gt;
					&lt;xsl:for-each select="subfield[@code!='6' or @code!='8']"&gt;
						&lt;xsl:value-of select="."/&gt;
						&lt;xsl:text&gt; &lt;/xsl:text&gt;
					&lt;/xsl:for-each&gt;
				&lt;/xsl:variable&gt;
				&lt;xsl:value-of select="substring($str,1,string-length($str)-1)"/&gt;
			&lt;/note&gt;
		&lt;/xsl:for-each&gt;
		--&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- 245c 362az 502-585 5XX--&gt;</span><span class="tI">
  </span><span class="tC">&lt;!--	JG removed statement of responsibility --&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"datafield[@tag = 245]/subfield[@code = 'c']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 245]"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom245c"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 362]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom362"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 500]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom500"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 502]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom502"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 504]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom504"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 508]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom508"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 511]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom511"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 515]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom515"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 518]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom518"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 524]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom524"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 530]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom530"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 533]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom533"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tC">&lt;!--
		&lt;xsl:for-each select="datafield[@tag=534]"&gt;
			&lt;xsl:call-template name="createNoteFrom534"/&gt;
		&lt;/xsl:for-each&gt;
--&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 535]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom535"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 536]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom536"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 538]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom538"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 541]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom541"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 545]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom545"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 546]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom546"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 561]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom561"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 562]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom562"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 581]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom581"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 583]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom583"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 585]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom585"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 588]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom500"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 501 or @tag = 507 or @tag = 513 or @tag = 514 or @tag = 516 or @tag = 522 or @tag = 525 or @tag = 526 or @tag = 544 or @tag = 547 or @tag = 550 or @tag = 552 or @tag = 555 or @tag = 556 or @tag = 565 or @tag = 567 or @tag = 580 or @tag = 584 or @tag = 586]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom5XX"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 034]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createSubGeoFrom034"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 043]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createSubGeoFrom043"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 045]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createSubTemFrom045"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 255]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createSubGeoFrom255"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 600]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createSubNameFrom600"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 610]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createSubNameFrom610"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 611]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createSubNameFrom611"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 630]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createSubTitleFrom630"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 648]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createSubChronFrom648"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 650]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createSubTopFrom650"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 651]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createSubGeoFrom651"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 653]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createSubFrom653"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 656]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createSubFrom656"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 662]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createSubGeoFrom662752"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 752]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createSubGeoFrom662752"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tC">&lt;!--Revision 2.09 added custom function to map Category Code to Subject. cm3 2022/12/08--&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- &lt;xd:doc&gt;&lt;xd:desc&gt;&lt;xd:p&gt;NAL Subject Category Codes&lt;/xd:p&gt;
	    &lt;xd:p&gt;Mapped from MARC 072&lt;/xd:p&gt;
	    &lt;xd:ref name="subjCatCode" type="function"&gt;f:subjCatCode[XPath]&lt;/xd:ref&gt; 
	    &lt;xd:p&gt;Matches the category code to its corresponding subject&lt;/xd:p&gt;
	    &lt;/xd:desc&gt;
	    &lt;/xd:doc&gt;--&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 072][@ind2 = '0']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"matches(., '[A-Z]\d{3}')"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;subject</span><span class="tAN"> authority=</span><span class="tAV">"agricola"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;topic</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"f:subjCatCode(normalize-space(subfield[@code = 'a']))"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/topic&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/subject&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- createClassificationFrom 0XX--&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '050']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createClassificationFrom050"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '060']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createClassificationFrom060"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '080']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createClassificationFrom080"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '082']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createClassificationFrom082"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '084']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createClassificationFrom084"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '086']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createClassificationFrom086"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- LC classification from 070 --&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"datafield[@tag = 070][@ind1 = '0']/subfield[@code = 'a']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;classification</span><span class="tAN"> authority=</span><span class="tAV">"nal"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 070][@ind1 = '0']/subfield[@code = 'a']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"datafield[@tag = 070]/subfield[@code = 'b']"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:text</span><span class="tXSLEl">&gt;</span><span class="tT"> </span><span class="tXSLEl">&lt;/xsl:text&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 070]/subfield[@code = 'b']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/classification&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tC">&lt;!--	location	--&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 852]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createLocationFrom852"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 856]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createLocationFrom856"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 490][@ind1 = '0']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createRelatedItemFrom490"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 440]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;relatedItem</span><span class="tAN"> type=</span><span class="tAV">"series"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;titleInfo</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;title</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"subfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"codes"</span><span class="tXSLEl">&gt;</span><span class="tT">av</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/title&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"part"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/titleInfo&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/relatedItem&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- tmee 1.40 1.74 1.88 fixed 510c mapping 20130829--&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 510]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;relatedItem</span><span class="tAN"> type=</span><span class="tAV">"isReferencedBy"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'a']"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;titleInfo</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tEl">&lt;title</span><span class="tEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tEl">&lt;/title&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/titleInfo&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'b']"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;originInfo</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tEl">&lt;dateOther</span><span class="tAN"> type=</span><span class="tAV">"coverage"</span><span class="tEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tEl">&lt;/dateOther&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/originInfo&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
      </span><span class="tEl">&lt;part</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;detail</span><span class="tAN"> type=</span><span class="tAV">"part"</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tEl">&lt;number</span><span class="tEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tXSLEl">&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"subfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
                  </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"codes"</span><span class="tXSLEl">&gt;</span><span class="tT">c</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
          </span><span class="tEl">&lt;/number&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/detail&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/part&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/relatedItem&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 534]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;relatedItem</span><span class="tAN"> type=</span><span class="tAV">"original"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedTitle"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedName"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"subfield[@code = 'b' or @code = 'c']"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;originInfo</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'c']"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tEl">&lt;publisher</span><span class="tEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tEl">&lt;/publisher&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'b']"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tEl">&lt;edition</span><span class="tEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tEl">&lt;/edition&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/originInfo&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedIdentifierISSN"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'z']"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;identifier</span><span class="tAN"> type=</span><span class="tAV">"isbn"</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/identifier&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedNote"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/relatedItem&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 700][subfield[@code = 't']]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;relatedItem</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"constituentOrRelatedType"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;titleInfo</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;title</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"specialSubfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"anyCodes"</span><span class="tXSLEl">&gt;</span><span class="tT">tfklmorsv</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"axis"</span><span class="tXSLEl">&gt;</span><span class="tT">t</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"afterCodes"</span><span class="tXSLEl">&gt;</span><span class="tT">g</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/title&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"part"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/titleInfo&gt;</span><span class="tI">
      </span><span class="tEl">&lt;name</span><span class="tAN"> type=</span><span class="tAV">"personal"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;namePart</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"specialSubfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"anyCodes"</span><span class="tXSLEl">&gt;</span><span class="tT">aq</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"axis"</span><span class="tXSLEl">&gt;</span><span class="tT">t</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"beforeCodes"</span><span class="tXSLEl">&gt;</span><span class="tT">g</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/namePart&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"termsOfAddress"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"nameDate"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"role"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/name&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedForm"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedIdentifierISSN"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/relatedItem&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 710][subfield[@code = 't']]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;relatedItem</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"constituentOrRelatedType"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;titleInfo</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;title</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"specialSubfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"anyCodes"</span><span class="tXSLEl">&gt;</span><span class="tT">tfklmorsv</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"axis"</span><span class="tXSLEl">&gt;</span><span class="tT">t</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"afterCodes"</span><span class="tXSLEl">&gt;</span><span class="tT">dg</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/title&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedPartNumName"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/titleInfo&gt;</span><span class="tI">
      </span><span class="tEl">&lt;name</span><span class="tAN"> type=</span><span class="tAV">"corporate"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'a']"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tEl">&lt;namePart</span><span class="tEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tEl">&lt;/namePart&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'b']"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tEl">&lt;namePart</span><span class="tEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tEl">&lt;/namePart&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"tempNamePart"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"specialSubfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"anyCodes"</span><span class="tXSLEl">&gt;</span><span class="tT">c</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"axis"</span><span class="tXSLEl">&gt;</span><span class="tT">t</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"beforeCodes"</span><span class="tXSLEl">&gt;</span><span class="tT">dgn</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:variable&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"normalize-space($tempNamePart)"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tEl">&lt;namePart</span><span class="tEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"$tempNamePart"</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tEl">&lt;/namePart&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"role"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/name&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedForm"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedIdentifierISSN"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/relatedItem&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 711][subfield[@code = 't']]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;relatedItem</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"constituentOrRelatedType"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;titleInfo</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;title</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"specialSubfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"anyCodes"</span><span class="tXSLEl">&gt;</span><span class="tT">tfklsv</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"axis"</span><span class="tXSLEl">&gt;</span><span class="tT">t</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"afterCodes"</span><span class="tXSLEl">&gt;</span><span class="tT">g</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/title&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedPartNumName"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/titleInfo&gt;</span><span class="tI">
      </span><span class="tEl">&lt;name</span><span class="tAN"> type=</span><span class="tAV">"conference"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;namePart</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"specialSubfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"anyCodes"</span><span class="tXSLEl">&gt;</span><span class="tT">aqdc</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"axis"</span><span class="tXSLEl">&gt;</span><span class="tT">t</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"beforeCodes"</span><span class="tXSLEl">&gt;</span><span class="tT">gn</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/namePart&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/name&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedForm"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedIdentifierISSN"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/relatedItem&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 730][@ind2 = '2']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;relatedItem</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"constituentOrRelatedType"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;titleInfo</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;title</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"subfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"codes"</span><span class="tXSLEl">&gt;</span><span class="tT">adfgklmorsv</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/title&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"part"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/titleInfo&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedForm"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedIdentifierISSN"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/relatedItem&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 740][@ind2 = '2']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;relatedItem</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"constituentOrRelatedType"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;titleInfo</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;title</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'a']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/title&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"part"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/titleInfo&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedForm"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/relatedItem&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 760]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;relatedItem</span><span class="tAN"> type=</span><span class="tAV">"series"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedItem76X-78X"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/relatedItem&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tC">&lt;!--AQ1.23 tmee/dlf --&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 762]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;relatedItem</span><span class="tAN"> type=</span><span class="tAV">"constituent"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedItem76X-78X"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/relatedItem&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- AQ1.5, AQ1.7 deleted tags 777 and 787 from the following select for relatedItem mapping --&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- 1.45 and 1.46 - AQ1.24 and 1.25 tmee--&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 765] | datafield[@tag = 767] | datafield[@tag = 775]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;relatedItem</span><span class="tAN"> type=</span><span class="tAV">"otherVersion"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedItem76X-78X"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/relatedItem&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 770] | datafield[@tag = 774]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;relatedItem</span><span class="tAN"> type=</span><span class="tAV">"constituent"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedItem76X-78X"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/relatedItem&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 772] | datafield[@tag = 773]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;relatedItem</span><span class="tAN"> type=</span><span class="tAV">"host"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedItem76X-78X"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/relatedItem&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 776]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;relatedItem</span><span class="tAN"> type=</span><span class="tAV">"otherFormat"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedItem76X-78X"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/relatedItem&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 780]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;relatedItem</span><span class="tAN"> type=</span><span class="tAV">"preceding"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedItem76X-78X"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/relatedItem&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 785]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;relatedItem</span><span class="tAN"> type=</span><span class="tAV">"succeeding"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedItem76X-78X"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/relatedItem&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 786]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;relatedItem</span><span class="tAN"> type=</span><span class="tAV">"original"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedItem76X-78X"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/relatedItem&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 800]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;relatedItem</span><span class="tAN"> type=</span><span class="tAV">"series"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;titleInfo</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;title</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"specialSubfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"anyCodes"</span><span class="tXSLEl">&gt;</span><span class="tT">tfklmorsv</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"axis"</span><span class="tXSLEl">&gt;</span><span class="tT">t</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"afterCodes"</span><span class="tXSLEl">&gt;</span><span class="tT">g</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/title&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"part"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/titleInfo&gt;</span><span class="tI">
      </span><span class="tEl">&lt;name</span><span class="tAN"> type=</span><span class="tAV">"personal"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;namePart</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"specialSubfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"anyCodes"</span><span class="tXSLEl">&gt;</span><span class="tT">aq</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"axis"</span><span class="tXSLEl">&gt;</span><span class="tT">t</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"beforeCodes"</span><span class="tXSLEl">&gt;</span><span class="tT">g</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/namePart&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"termsOfAddress"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"nameDate"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"role"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/name&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedForm"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/relatedItem&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 810]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;relatedItem</span><span class="tAN"> type=</span><span class="tAV">"series"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;titleInfo</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;title</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"specialSubfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"anyCodes"</span><span class="tXSLEl">&gt;</span><span class="tT">tfklmorsv</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"axis"</span><span class="tXSLEl">&gt;</span><span class="tT">t</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"afterCodes"</span><span class="tXSLEl">&gt;</span><span class="tT">dg</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/title&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedPartNumName"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/titleInfo&gt;</span><span class="tI">
      </span><span class="tEl">&lt;name</span><span class="tAN"> type=</span><span class="tAV">"corporate"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'a']"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tEl">&lt;namePart</span><span class="tEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tEl">&lt;/namePart&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'b']"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tEl">&lt;namePart</span><span class="tEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tEl">&lt;/namePart&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
        </span><span class="tEl">&lt;namePart</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"specialSubfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"anyCodes"</span><span class="tXSLEl">&gt;</span><span class="tT">c</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"axis"</span><span class="tXSLEl">&gt;</span><span class="tT">t</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"beforeCodes"</span><span class="tXSLEl">&gt;</span><span class="tT">dgn</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/namePart&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"role"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/name&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedForm"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/relatedItem&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 811]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;relatedItem</span><span class="tAN"> type=</span><span class="tAV">"series"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;titleInfo</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;title</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"specialSubfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"anyCodes"</span><span class="tXSLEl">&gt;</span><span class="tT">tfklsv</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"axis"</span><span class="tXSLEl">&gt;</span><span class="tT">t</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"afterCodes"</span><span class="tXSLEl">&gt;</span><span class="tT">g</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/title&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedPartNumName"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/titleInfo&gt;</span><span class="tI">
      </span><span class="tEl">&lt;name</span><span class="tAN"> type=</span><span class="tAV">"conference"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;namePart</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"specialSubfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"anyCodes"</span><span class="tXSLEl">&gt;</span><span class="tT">aqdc</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"axis"</span><span class="tXSLEl">&gt;</span><span class="tT">t</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"beforeCodes"</span><span class="tXSLEl">&gt;</span><span class="tT">gn</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/namePart&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"role"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/name&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedForm"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/relatedItem&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '830']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;relatedItem</span><span class="tAN"> type=</span><span class="tAV">"series"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;titleInfo</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;title</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"chopPunctuation"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"chopString"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"subfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"codes"</span><span class="tXSLEl">&gt;</span><span class="tT">adfgklmorsv</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/title&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"part"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/titleInfo&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"relatedForm"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/relatedItem&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '856'][@ind2 = '2']/subfield[@code = 'q']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;relatedItem</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;internetMediaType</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/internetMediaType&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/relatedItem&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '880']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:apply-templates</span><span class="tAN"> select=</span><span class="tAV">"self::*"</span><span class="tAN"> mode=</span><span class="tAV">"trans880"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- 856, 020, 024, 022, 028, 010, 035, 037 --&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '020']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"subfield[@code = 'a']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;identifier</span><span class="tAN"> type=</span><span class="tAV">"isbn"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'a']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/identifier&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '020']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"subfield[@code = 'z']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;identifier</span><span class="tAN"> type=</span><span class="tAV">"isbn"</span><span class="tAN"> invalid=</span><span class="tAV">"yes"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'z']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/identifier&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '024'][@ind1 = '0']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"subfield[@code = 'a']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;identifier</span><span class="tAN"> type=</span><span class="tAV">"isrc"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'a']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/identifier&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '024'][@ind1 = '2']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"subfield[@code = 'a']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;identifier</span><span class="tAN"> type=</span><span class="tAV">"ismn"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'a']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/identifier&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '024'][@ind1 = '4']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;identifier</span><span class="tAN"> type=</span><span class="tAV">"sici"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"subfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"codes"</span><span class="tXSLEl">&gt;</span><span class="tT">ab</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/identifier&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '024'][@ind1 = '8']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;identifier</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'a']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/identifier&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '022'][subfield[@code = 'a']]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"subfield[@code = 'a']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;identifier</span><span class="tAN"> type=</span><span class="tAV">"issn"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'a']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/identifier&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '022'][subfield[@code = 'z']]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"subfield[@code = 'z']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;identifier</span><span class="tAN"> type=</span><span class="tAV">"issn"</span><span class="tAN"> invalid=</span><span class="tAV">"yes"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'z']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/identifier&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '022'][subfield[@code = 'y']]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"subfield[@code = 'y']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;identifier</span><span class="tAN"> type=</span><span class="tAV">"issn"</span><span class="tAN"> invalid=</span><span class="tAV">"yes"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'y']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/identifier&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '022'][subfield[@code = 'l']]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"subfield[@code = 'l']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;identifier</span><span class="tAN"> type=</span><span class="tAV">"issn-l"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'l']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/identifier&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '022'][subfield[@code = 'm']]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"subfield[@code = 'm']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;identifier</span><span class="tAN"> type=</span><span class="tAV">"issn-l"</span><span class="tAN"> invalid=</span><span class="tAV">"yes"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'm']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/identifier&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- LC identifier from 024 --&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"datafield[@tag = 024][@ind1 = '7']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;identifier</span><span class="tAN"> type=</span><span class="tAV">"doi"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 024][@ind1 = '7']/subfield[@code = 'a']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/identifier&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- LC  identifier from 001 --&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"controlfield[@tag = 001]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;identifier</span><span class="tAN"> type=</span><span class="tAV">"control"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"controlfield[@tag = 001]"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/identifier&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '010'][subfield[@code = 'a']]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;identifier</span><span class="tAN"> type=</span><span class="tAV">"lccn"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"normalize-space(subfield[@code = 'a'])"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/identifier&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '010'][subfield[@code = 'z']]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;identifier</span><span class="tAN"> type=</span><span class="tAV">"lccn"</span><span class="tAN"> invalid=</span><span class="tAV">"yes"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"normalize-space(subfield[@code = 'z'])"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/identifier&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- LM: Map Agricola accession ID to identifier --&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '016'][subfield[@code = 'a']]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;identifier</span><span class="tAN"> type=</span><span class="tAV">"agricola"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"normalize-space(subfield[@code = 'a'])"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/identifier&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '028']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;identifier</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"type"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"@ind1 = '0'"</span><span class="tXSLEl">&gt;</span><span class="tT">issue number</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"@ind1 = '1'"</span><span class="tXSLEl">&gt;</span><span class="tT">matrix number</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"@ind1 = '2'"</span><span class="tXSLEl">&gt;</span><span class="tT">music plate</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"@ind1 = '3'"</span><span class="tXSLEl">&gt;</span><span class="tT">music publisher</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"@ind1 = '4'"</span><span class="tXSLEl">&gt;</span><span class="tT">videorecording identifier</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"subfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"codes"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:choose</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:when</span><span class="tAN"> test=</span><span class="tAV">"@ind1 = '0'"</span><span class="tXSLEl">&gt;</span><span class="tT">ba</span><span class="tXSLEl">&lt;/xsl:when&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:otherwise</span><span class="tXSLEl">&gt;</span><span class="tT">ab</span><span class="tXSLEl">&lt;/xsl:otherwise&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:choose&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/identifier&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '035'][subfield[@code = 'a'][contains(text(), '(OCoLC)')]]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;identifier</span><span class="tAN"> type=</span><span class="tAV">"oclc"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"normalize-space(substring-after(subfield[@code = 'a'], '(OCoLC)'))"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/identifier&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '037']"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;identifier</span><span class="tAN"> type=</span><span class="tAV">"stock number"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"subfield[@code = 'c']"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"displayLabel"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"subfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"codes"</span><span class="tXSLEl">&gt;</span><span class="tT">c</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"subfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"codes"</span><span class="tXSLEl">&gt;</span><span class="tT">ab</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/identifier&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- 1.51 tmee 20100129--&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = '856'][subfield[@code = 'u']]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"starts-with(subfield[@code = 'u'], 'urn:hdl') or starts-with(subfield[@code = 'u'], 'hdl') or starts-with(subfield[@code = 'u'], 'http://hdl.loc.gov')"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;identifier</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"type"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"starts-with(subfield[@code = 'u'], 'urn:doi') or starts-with(subfield[@code = 'u'], 'doi')"</span><span class="tXSLEl">&gt;</span><span class="tT">doi</span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"starts-with(subfield[@code = 'u'], 'urn:hdl') or starts-with(subfield[@code = 'u'], 'hdl') or starts-with(subfield[@code = 'u'], 'http://hdl.loc.gov')"</span><span class="tXSLEl">&gt;</span><span class="tT">hdl</span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"concat('hdl:', substring-after(subfield[@code = 'u'], 'http://hdl.loc.gov/'))"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/identifier&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"starts-with(subfield[@code = 'u'], 'urn:hdl') or starts-with(subfield[@code = 'u'], 'hdl')"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;identifier</span><span class="tAN"> type=</span><span class="tAV">"hdl"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"subfield[@code = 'y' or @code = '3' or @code = 'z']"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"displayLabel"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"subfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"codes"</span><span class="tXSLEl">&gt;</span><span class="tT">y3z</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"concat('hdl:', substring-after(subfield[@code = 'u'], 'http://hdl.loc.gov/'))"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/identifier&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 024][@ind1 = 1]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;identifier</span><span class="tAN"> type=</span><span class="tAV">"upc"</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'a']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/identifier&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tC">&lt;!-- 1.51 tmee 20100129 removed duplicate code 20131217
		&lt;xsl:for-each select="datafield[@tag='856'][subfield[@code='u']]"&gt;
			&lt;xsl:if
				test="starts-with(subfield[@code='u'],'urn:hdl') or starts-with(subfield[@code='u'],'hdl') or starts-with(subfield[@code='u'],'http://hdl.loc.gov') "&gt;
				&lt;identifier&gt;
					&lt;xsl:attribute name="type"&gt;
						&lt;xsl:if
							test="starts-with(subfield[@code='u'],'urn:doi') or starts-with(subfield[@code='u'],'doi')"
							&gt;doi&lt;/xsl:if&gt;
						&lt;xsl:if
							test="starts-with(subfield[@code='u'],'urn:hdl') or starts-with(subfield[@code='u'],'hdl') or starts-with(subfield[@code='u'],'http://hdl.loc.gov')"
							&gt;hdl&lt;/xsl:if&gt;
					&lt;/xsl:attribute&gt;
					&lt;xsl:value-of
						select="concat('hdl:',substring-after(subfield[@code='u'],'http://hdl.loc.gov/'))"
					/&gt;
				&lt;/identifier&gt;
			&lt;/xsl:if&gt;

			&lt;xsl:if
				test="starts-with(subfield[@code='u'],'urn:hdl') or starts-with(subfield[@code='u'],'hdl')"&gt;
				&lt;identifier type="hdl"&gt;
					&lt;xsl:if test="subfield[@code='y' or @code='3' or @code='z']"&gt;
						&lt;xsl:attribute name="displayLabel"&gt;
							&lt;xsl:call-template name="subfieldSelect"&gt;
								&lt;xsl:with-param name="codes"&gt;y3z&lt;/xsl:with-param&gt;
							&lt;/xsl:call-template&gt;
						&lt;/xsl:attribute&gt;
					&lt;/xsl:if&gt;
					&lt;xsl:value-of
						select="concat('hdl:',substring-after(subfield[@code='u'],'http://hdl.loc.gov/'))"
					/&gt;
				&lt;/identifier&gt;
			&lt;/xsl:if&gt;
		&lt;/xsl:for-each&gt;
		--&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 856][@ind2 = '2'][subfield[@code = 'u']]"</span><span class="tXSLEl">&gt;</span><span class="tI">
    </span><span class="tEl">&lt;relatedItem</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;location</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;url</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"subfield[@code = 'y' or @code = '3']"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"displayLabel"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"subfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"codes"</span><span class="tXSLEl">&gt;</span><span class="tT">y3</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"subfield[@code = 'z']"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"note"</span><span class="tXSLEl">&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"subfieldSelect"</span><span class="tXSLEl">&gt;</span><span class="tI">
                </span><span class="tXSLEl">&lt;xsl:with-param</span><span class="tAN"> name=</span><span class="tAV">"codes"</span><span class="tXSLEl">&gt;</span><span class="tT">z</span><span class="tXSLEl">&lt;/xsl:with-param&gt;</span><span class="tI">
              </span><span class="tXSLEl">&lt;/xsl:call-template&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'u']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/url&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/location&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/relatedItem&gt;</span><span class="tI">
  </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tC">&lt;!--NAL notes 910, 930, 945, 946, 974 --&gt;</span><span class="tI">
  </span><span class="tEl">&lt;extension</span><span class="tEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom910"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom930"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom945"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom946"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:call-template</span><span class="tAN"> name=</span><span class="tAV">"createNoteFrom974"</span><span class="tXSLEl">/&gt;</span><span class="tI">
  </span><span class="tEl">&lt;/extension&gt;</span><span class="tI">
  </span><span class="tEl">&lt;recordInfo</span><span class="tEl">&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"leader[substring($marcLeader, 19, 1) = 'a']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;descriptionStandard</span><span class="tEl">&gt;</span><span class="tT">aacr</span><span class="tEl">&lt;/descriptionStandard&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tC">&lt;!-- 040$e = Description Conventions (e.g., RDA) --&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 040]"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"subfield[@code = 'e']"</span><span class="tXSLEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;descriptionStandard</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'e']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/descriptionStandard&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
      </span><span class="tEl">&lt;recordContentSource</span><span class="tAN"> authority=</span><span class="tAV">"marcorg"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"subfield[@code = 'a']"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/recordContentSource&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"controlfield[@tag = 008]"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;recordCreationDate</span><span class="tAN"> encoding=</span><span class="tAV">"marc"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"substring(., 1, 6)"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/recordCreationDate&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"controlfield[@tag = 005]"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;recordChangeDate</span><span class="tAN"> encoding=</span><span class="tAV">"iso8601"</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/recordChangeDate&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"controlfield[@tag = 001]"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;recordIdentifier</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:if</span><span class="tAN"> test=</span><span class="tAV">"../controlfield[@tag = 003]"</span><span class="tXSLEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:attribute</span><span class="tAN"> name=</span><span class="tAV">"source"</span><span class="tXSLEl">&gt;</span><span class="tI">
            </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"../controlfield[@tag = 003]"</span><span class="tXSLEl">/&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;/xsl:attribute&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;/xsl:if&gt;</span><span class="tI">
        </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/recordIdentifier&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
    </span><span class="tC">&lt;!-- Revision 2.04 updated recordOrigin to reflect the XSLT filename used in transform cm 2022/12/08 --&gt;</span><span class="tI">
    </span><span class="tEl">&lt;recordOrigin</span><span class="tEl">&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:variable</span><span class="tAN"> name=</span><span class="tAV">"transform"</span><span class="tAN"> select=</span><span class="tAV">"string(tokenize(base-uri(document('')), '/')[last()])"</span><span class="tAN"> as=</span><span class="tAV">"xs:string"</span><span class="tXSLEl">/&gt;</span><span class="tI">
      </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"normalize-space(concat('Converted from MARCXML to MODS version 3.4 using', ' ', $transform, ' ', '(Revision 2.03 2022/10/27)'))"</span><span class="tXSLEl">/&gt;</span><span class="tI">
    </span><span class="tEl">&lt;/recordOrigin&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;xsl:for-each</span><span class="tAN"> select=</span><span class="tAV">"datafield[@tag = 040]/subfield[@code = 'b']"</span><span class="tXSLEl">&gt;</span><span class="tI">
      </span><span class="tEl">&lt;languageOfCataloging</span><span class="tEl">&gt;</span><span class="tI">
        </span><span class="tEl">&lt;languageTerm</span><span class="tAN"> authority=</span><span class="tAV">"iso639-2b"</span><span class="tAN"> type=</span><span class="tAV">"code"</span><span class="tEl">&gt;</span><span class="tI">
          </span><span class="tXSLEl">&lt;xsl:value-of</span><span class="tAN"> select=</span><span class="tAV">"."</span><span class="tXSLEl">/&gt;</span><span class="tI">
        </span><span class="tEl">&lt;/languageTerm&gt;</span><span class="tI">
      </span><span class="tEl">&lt;/languageOfCataloging&gt;</span><span class="tI">
    </span><span class="tXSLEl">&lt;/xsl:for-each&gt;</span><span class="tI">
  </span><span class="tEl">&lt;/recordInfo&gt;</span><span class="tI">
</span><span class="tXSLEl">&lt;/xsl:template&gt;</span></pre>
                                    </td>
                                 </tr>
                              </table>
                           </div>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
            <td class="rt_lR"></td>
         </tr>
         <tr>
            <td class="rt_cBL"></td>
            <td class="rt_lB"></td>
            <td class="rt_cBR"></td>
         </tr>
      </table>
      <div class="footer">
         <hr />
         <div align="center">Stylesheet documentation generated by <a href="http://www.oxygenxml.com" target="_parent"><span class="oXygenLogo"><span class="redX">&lt;</span>o<span class="redX">X</span>ygen<span class="redX">/&gt;</span></span></a><sup>®</sup> XML Editor.</div>
      </div><script type="text/javascript"><!--
                    // The namespace is the selected option in the TOC combo.
                    
                    // The corresponding div is already visible conf. to its style attr.                     
                    
                            var selectToc = getElementObject('selectTOC');
                            if(selectToc != null){
                            // It can be null when having chunking, the combo of the TOC is in another frame.
                            selectToc.selectedIndex = 1;
                            }
                        
                    
                    // Floats the toolbar.
                    var globalControls = getElementObject("global_controls"); 
                    
                    if(globalControls != null){
                    var browser=navigator.appName;
                    var version = parseFloat(navigator.appVersion.split('MSIE')[1]);
                    
                    var IE6 = false;
                    if ((browser=="Microsoft Internet Explorer") && (version < 7)){
                    IE6 = true;
                    }
                    
                    //alert (IE6 + " |V| " + version);
                    
                    if(IE6){
                    // On IE 6 the 'fixed' property is not supported. We must use javascript. 
                    globalControls.style.position='absolute';                         
                    // The global controls will do not exist in the TOC frame, when chunking.
                    findAndFloat("global_controls", 225, 30);    
                    } else {
                    globalControls.style.position='fixed';                     	
                    }
                    
                    globalControls.style.right='0';                       
                    }
                //--></script></body>
</html>